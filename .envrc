# direnvを使用してプロジェクトディレクトリに入った時に自動実行
#
# 【動作タイミング】
# - このディレクトリ（~/dotfiles）に cd で移動した時
# - サブディレクトリから親ディレクトリに戻ってきた時
# - .envrc ファイルが更新された時（要 direnv allow）
#
# 【セキュリティ】
# - 初回実行時や .envrc 更新時は「direnv allow」が必要
# - これにより意図しないコード実行を防止
#
# 【無効化方法】
# - direnv deny: 一時的に無効化
# - rm .envrc: 完全に削除
# - コメントアウト: 特定の処理のみ無効化

# 開発環境設定の同期
# Claude/Serena/sheldonの設定ファイルへのシンボリックリンクを作成
# dotfiles/.claude/commands/ から ~/.claude/commands/ へ
# dotfiles/home/config/sheldon/ から ~/.config/sheldon/ へ
if [ -f "${HOME}/dotfiles/setup/03_dev_configs.sh" ]; then
  # > /dev/null 2>&1: 標準出力とエラー出力を非表示にして静かに実行
  # 同期の詳細を見たい場合は、この部分を削除してください
  "${HOME}/dotfiles/setup/03_dev_configs.sh" >/dev/null 2>&1
fi

# Git hooks の自動セットアップ
# .githooks/ から .git/hooks/ へファイルをコピーして実行権限を付与
if [ -f "${HOME}/dotfiles/scripts/setup/setup-git-hooks.ts" ]; then
  # commit前のlint/formatチェックを自動化
  "${HOME}/dotfiles/scripts/setup/setup-git-hooks.ts" >/dev/null 2>&1
fi
