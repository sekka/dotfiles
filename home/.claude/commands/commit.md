---
description: 関連する変更をまとめてコミット（署名なし）
allowed-tools: Bash(git status:*), Bash(git diff:*), Bash(git add:*), Bash(git commit:*), Bash(git log:*), Read, Glob, TodoWrite
---

関連する変更ごとにまとめてコミットしてください。署名は含めないでください。

## 実行内容

### Step 1: 変更内容の確認と検証

1. `git status` で変更を確認
2. `git diff` で詳細な変更内容を確認
3. **検証チェックリスト**:
   - [ ] 価値のある変更のみが含まれているか（デバッグログ、一時的なコード、コメントアウトは除外）
   - [ ] 機密情報（APIキー、パスワード等）が含まれていないか
   - [ ] `.gitignore`対象のファイルが含まれていないか
   - [ ] 意図しない変更（自動生成ファイル、IDE設定等）が含まれていないか

### Step 2: 関連する変更のグループ化

- 関連する変更をグループ化
- 無関係な変更は別々のコミットに分ける
- 小さく、原子的なコミットを心がける

### Step 3: コミットメッセージの作成

- 適切なプレフィックスを使用（下記参照）
- 現在形を使用（"added" ではなく "add"）
- 最初の行を72文字以下に保つ
- 日本語で何をなぜ変更したのか明確に記載
- 署名は含めない

## コミットメッセージのプレフィックス

| プレフィックス | 用途                                                 |
| -------------- | ---------------------------------------------------- |
| `feat`         | 新機能または機能性の追加                             |
| `fix`          | バグ修正                                             |
| `perf`         | パフォーマンス改善                                   |
| `refactor`     | 機能を変更せずにコード構造を変更                     |
| `style`        | コードの意味に影響しない変更（空白、フォーマット等） |
| `docs`         | ドキュメントのみの変更                               |
| `test`         | テストの追加・修正                                   |
| `build`        | ビルドプロセスや依存関係への変更                     |
| `ci`           | CI/CD 設定の変更                                     |
| `chore`        | メンテナンスタスク、依存関係の更新                   |
| `revert`       | 以前のコミットを元に戻す                             |
| `security`     | セキュリティ修正または脆弱性パッチ                   |
| `release`      | バージョンリリースまたはデプロイメント               |
| `hotfix`       | 緊急の本番修正                                       |
| `config`       | 構成の変更                                           |
| `ui`           | 新機能なしの UI/UX 改善                              |
| `a11y`         | アクセシビリティ改善                                 |

## 複数コミット時の順序

依存関係がある変更は以下の順序でコミット：

1. 基盤となる変更（ライブラリ追加、設定変更等）
2. 型定義やインターフェースの変更
3. 実装の変更
4. テストの追加・修正
5. ドキュメントの更新

## コミットメッセージの書き方

### 良い例

```
feat: ユーザープロフィール編集機能を追加

プロフィール画像のアップロードと基本情報の更新が可能に。
バリデーションとエラーハンドリングを実装。
```

```
fix: 認証エラー時のアカウント切り替え問題を解決

アカウント切り替え時にトークンが正しくクリアされず、
前のユーザーのセッションが残る問題を修正。
```

```
perf: リーダーボードのクエリパフォーマンスを最適化

インデックスの追加とクエリの書き直しにより、
レスポンス時間を500ms→50msに改善。
```

### 避けるべき例

```
❌ chore: いろいろ修正
❌ fix: バグ修正
❌ update: コード更新
```

## コミットのベストプラクティス

1. **小さく頻繁なコミット**
   - 1つの責務に焦点を当てる
   - レビューしやすいサイズに保つ
   - ロールバックしやすいように

2. **価値のある変更のみをコミット**
   - デバッグログは削除
   - 一時的なコードは削除
   - コメントアウトされたコードは削除
   - 意図しない空白変更は除外

3. **わかりやすいメッセージ**
   - 何を変更したかだけでなく、なぜ変更したかも記載
   - チケット番号があれば記載（例: `#123`）
   - 破壊的変更がある場合は明記

4. **プロジェクトの規約に従う**
   - 既存のコミットメッセージのスタイルを確認
   - `.gitmessage`があれば参照

5. **レビュー前の最終確認**
   - `git diff --cached`でステージングされた変更を再確認
   - 各コミットが独立して意味をなすか確認

## 注意事項

- 複数の無関係な変更がある場合は、別々のコミットに分ける
- コミットメッセージは簡潔かつ明確に
- 変更の意図が伝わるように記載
- `.gitignore`対象のファイルが含まれていないか確認
- 機密情報（APIキー、パスワード等）が含まれていないか確認
- 一時的なコード、デバッグログ、コメントアウトされたコードをコミットしない
- プロジェクトの既存のコミットメッセージ規約に従う
- 量より質を重視：複数の急いだコミットより、1つの丁寧に作成されたコミットを優先
