---
description: テストコード生成
argument-hint: [対象ファイルまたは関数]
---

# テストコード生成

対象: $ARGUMENTS

## 実行内容

### 1. テスト環境の確認

- `package.json` からテストフレームワークを特定（Jest, Vitest, pytest, RSpec 等）
- 既存のテストファイルからプロジェクトのテストパターンを確認
- テスト設定ファイル（jest.config.js, vitest.config.ts, pytest.ini 等）を確認

### 2. 対象コードの分析

- 関数/クラスのシグネチャを確認
- 依存関係を特定（モックが必要なもの）
- エッジケースを洗い出し

### 3. テストケースの設計

以下のカテゴリを網羅：

#### 正常系

- 基本的な入力での期待される動作
- 複数の有効な入力パターン

#### 異常系

- 無効な入力（null, undefined, 空文字, 不正な型）
- エラーハンドリングの確認
- 例外がスローされるケース

#### 境界値

- 最小値/最大値
- 空配列/空オブジェクト
- 文字列の長さ制限
- 数値の範囲

#### 特殊ケース

- 非同期処理のタイムアウト
- 並行実行時の動作
- キャッシュの有無による違い

### 4. テストコードの実装

- プロジェクトの既存テストパターンに従う
- 適切なモック/スタブを使用
- テストの独立性を確保（他のテストに依存しない）
- わかりやすいテスト名を付ける（日本語可）

### 5. テストの実行と確認

- テストを実行して全てパスすることを確認
- カバレッジを確認（可能な場合）

## モック/スタブの方針

- 外部 API 呼び出し → モック必須
- データベース → モックまたはテスト用 DB
- ファイルシステム → モック推奨
- 日時 → 固定値にモック
- 乱数 → シード固定またはモック

## 出力形式

テストファイルは対象ファイルと同じディレクトリの `__tests__/` または隣接する `.test.ts` / `.spec.ts` に配置（プロジェクトの慣習に従う）
