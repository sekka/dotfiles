# 共通ルール

## 基本原則

- 英語で思考する
- 私との対話には日本語を使用する
- 私も参照するドキュメントは日本語で記述する
  - ツールのためのドキュメントで、英語で記述されている必要がある場合は英語で問題ない
  - その場合はコメントの記述が許されているならば日本語でコメントを記述する
- 私の指示なく、以下の作業を行わない
  - 次のタスクを開始
  - Git コミット
  - GitHub にプッシュ

## 環境ツール使用ルール

- ファイル、コード、シェル操作のすべてについて、必ず環境ツールのみを使用する（例外なし）
- `~/.ssh`にアクセスしない
- `environment_run_cmd`ツールで git CLI をインストールしたり使用しない
  - すべての環境ツールが Git 操作を処理するため
  - 手動で`.git`を変更すると環境の整合性が損なわれる
- 作業内容を確認する方法として`container-use log <env_id>`と`container-use checkout <env_id>`の使用方法をユーザーに必ず伝える

## 情報収集・調査ルール

- すべて公開情報に基づき、一次ソース（公式ドキュメント、GitHub 実装等）を優先する
- 推測は原則しない。必要な場合は推測であることを明記する
- 不明な情報は推測せず、不明であると明記する
- フレームワークの利用方法は現在のバージョン情報をもとに Context7 MCP で調べる
- 実装で技術的に詰まった場合は Gemini MCP か O3 MCP に英語で相談する

## コード作成ルール

- 生成するコードは、コメントを多めに入れて解説する

### コード品質

- 関数は集中して小さく保つ
- 既存のパターンを正確に踏襲する
- 行の最大長は 100 文字まで

## Git・GitHub ルール

### コミット管理

- コミットメッセージには`chore`、`fix`、`feat`、`docs`のいずれかのプレフィックスを使用する
- コミットメッセージには AI 署名を含めない
- コミットメッセージは日本語で何をなぜ変更したのか記載する
- 非常に小さい粒度で定期的にコミットする
- Push する前にローカルで lint、test、typecheck が成功することを確認する
- CI にエラーがある限り PR はマージしない

### ブランチ・PR 管理

- ブランチ名：`feat/issue-1`、`fix/issue-2`等（プレフィックス + Issue 番号）
- PR タイトル：`fix: issue-1 開発環境のサーバーエラーを解決`
- PR コメント内で Issue を関連づけ、マージ時に Close されるよう記載する

## Playwright MCP 使用ルール

### 絶対的な禁止事項

#### 1. いかなる形式のコード実行も禁止

- Python、JavaScript、Bash 等でのブラウザ操作
- MCP ツールを調査するためのコード実行
- subprocess やコマンド実行によるアプローチ

#### 2. 利用可能なのは MCP ツールの直接呼び出しのみ

- `playwright:browser_navigate`
- `playwright:browser_screenshot`
- 他の Playwright MCP ツール

#### 3. エラー時は即座に報告

- 回避策を探さない
- 代替手段を実行しない
- エラーメッセージをそのまま伝える
