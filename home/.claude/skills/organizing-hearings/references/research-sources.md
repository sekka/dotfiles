# 補足調査の情報源

## 概要

クライアントヒアリングで得た情報を、外部の信頼できる情報源で補完・検証する方法を定義する。
適切なツールを適切なタイミングで使い、効率的かつ正確な情報収集を実現する。

---

## 基本方針

### 1. クライアント情報を優先

- 外部調査はあくまで「補足」
- クライアントの認識と異なる情報が見つかった場合は、矛盾を明記してユーザーに確認

### 2. 信頼性の高い情報源を優先

- 公的機関、業界団体、大手メディア
- 個人ブログやSNSは避ける（専門家の意見として引用する場合のみ）

### 3. セキュリティ原則を遵守

- 機密情報（APIキー、顧客データ、社内システムURL）を外部ツールに送信しない
- 公開情報のみを問い合わせ対象とする

**参考**: `@.claude/rules/security.md`

---

## ツール別使用ガイド

### WebSearch

**用途**:
- 業界動向・市場規模
- 競合情報
- トレンド調査
- 専門用語の解説

**使用例**:

```typescript
WebSearch({
  query: "ブランディング市場 2025 規模 日本"
});
```

**注意事項**:
- 検索結果には必ず出典URLを付記
- 情報の鮮度を確認（古い記事に注意）
- 複数の情報源でクロスチェック

**適切なクエリ例**:

| 調査目的 | 良いクエリ | 悪いクエリ |
|----------|-----------|-----------|
| 市場規模 | "ECサイト 市場規模 2025 日本" | "ECサイト" |
| 競合分析 | "A社 B社 比較 ブランディング" | "競合" |
| トレンド | "デザイントレンド 2026 ミニマル" | "デザイン" |
| 用語解説 | "SEO 意味 初心者向け" | "SEO" |

---

### Context7

**用途**:
- 技術仕様・ベストプラクティス
- ライブラリ公式ドキュメント
- 実装例・サンプルコード

**使用例**:

```typescript
// ライブラリIDの解決
resolve_library_id({
  libraryName: "Next.js",
  query: "Next.js 14でのデータフェッチ方法"
});

// ドキュメント検索
query_docs({
  libraryId: "/vercel/next.js",
  query: "App Routerでのキャッシュ戦略"
});
```

**注意事項**:
- 1つの質問で3回まで呼び出し可能
- バージョン指定が可能（例: `/vercel/next.js/v14.3.0`）
- 技術的な質問にのみ使用（ビジネス情報には不向き）

**適切な使用例**:

| プロジェクト種別 | Context7で調査すべき内容 |
|------------------|-------------------------|
| ウェブ制作 | フレームワークのベストプラクティス、API仕様 |
| ブランディング | (使用しない) |
| ビジネス戦略 | (使用しない) |

---

### DeepWiki

**用途**:
- OSSライブラリのCHANGELOG
- GitHub Issuesの既知の問題
- マイグレーションガイド

**使用例**:

```typescript
// リポジトリ構造の取得
read_wiki_structure({
  repoName: "facebook/react"
});

// 質問
ask_question({
  repoName: "facebook/react",
  question: "React 18から19への破壊的変更は？"
});
```

**注意事項**:
- プライベートリポジトリには使えない
- リポジトリ名は`owner/repo`形式
- 技術プロジェクト以外では使用頻度が低い

---

### WebFetch

**用途**:
- 特定のWebページの内容取得
- npm trends、Moiva.io（パッケージ比較）
- ブログ記事の詳細確認

**使用例**:

```typescript
WebFetch({
  url: "https://npmtrends.com/react-vs-vue",
  prompt: "ReactとVueのダウンロード数推移を教えて"
});
```

**注意事項**:
- 認証が必要なサイト（Google Docs、Confluence、Jira、GitHub）は使えない
- URLに機密情報（トークン、セッションID）が含まれていないか確認
- リダイレクトされた場合は新しいURLで再度WebFetch

**使用不可なURL例**:
- `https://docs.google.com/...`（認証必要）
- `https://company.atlassian.net/...`（社内Wiki）
- `https://api.example.com/users/12345`（顧客データ）

---

## 調査フロー（デシジョンツリー）

```
補足情報が必要
  ↓
技術仕様・実装方法？
  YES → Context7
  NO  → 次へ
  ↓
業界動向・市場規模？
  YES → WebSearch
  NO  → 次へ
  ↓
特定のWebページ？
  YES → WebFetch
  NO  → 次へ
  ↓
OSSのCHANGELOG？
  YES → DeepWiki
  NO  → WebSearchで広く検索
```

---

## プロジェクト種別ごとの調査戦略

### ブランディングプロジェクト

**主な調査対象**:
1. 業界動向・市場規模
2. 競合のブランド戦略
3. ターゲット層の行動特性
4. デザイントレンド

**使用ツール**: WebSearch（90%）、WebFetch（10%）

**クエリ例**:
- "ブランディング トレンド 2026"
- "競合A社 ブランド戦略"
- "30代女性 消費行動 調査"
- "ミニマルデザイン 事例"

---

### ウェブ制作プロジェクト

**主な調査対象**:
1. 技術仕様・ベストプラクティス
2. UX/UIトレンド
3. パフォーマンス最適化
4. アクセシビリティ基準

**使用ツール**: Context7（50%）、WebSearch（40%）、DeepWiki（10%）

**クエリ例**:
- Context7: "Next.js App Router データフェッチ"
- WebSearch: "Webデザイン トレンド 2026"
- DeepWiki: "React 19 breaking changes"

---

### ビジネス戦略プロジェクト

**主な調査対象**:
1. 市場環境・規模
2. 競合分析
3. 業界動向・法規制
4. ビジネスモデル事例

**使用ツール**: WebSearch（95%）、WebFetch（5%）

**クエリ例**:
- "SaaS 市場規模 2025 日本"
- "サブスクリプション ビジネスモデル 事例"
- "業界A 規制 最新"

---

## 調査のタイミング

### 1. 情報の欠落を発見したとき

**例**:
- ヒアリングで「市場規模は拡大している」と聞いたが、具体的な数値がない
- → WebSearchで市場規模の統計を調査

### 2. 専門用語が登場したとき

**例**:
- 「DX推進」「オムニチャネル」などの用語
- → WebSearchで平易な解説を検索し、📝補足として追加

### 3. 競合情報が不明確なとき

**例**:
- 「競合は強い」と聞いたが、具体的な差異が不明
- → WebSearchで競合の事業内容、強み・弱みを調査

### 4. トレンドを確認したいとき

**例**:
- 「最新のデザインで」と要望があった
- → WebSearchで「Webデザイン トレンド 2026」を調査

---

## 調査結果の記録方法

### パターン1: 本文に統合

一般的な事実や補足説明は、本文に自然に統合する。

**例**:
```markdown
## 市場環境

国内EC市場は2025年に約20兆円規模に達し、前年比10%成長を続けている[^1]。
特に30-40代女性のオンライン購買比率が上昇傾向にある[^2]。

[^1]: 経済産業省「電子商取引に関する市場調査」(2025) https://example.com
[^2]: 日経MJ「消費者調査2025」(2025-10-15) https://example.com
```

### パターン2: 補足セクション

詳細な説明や背景情報は、セクション末尾に補足として追加。

**例**:
```markdown
## ブランドコンセプト

「信頼と革新の調和」をコアメッセージとする。
※ヒアリングより

---

📝 **補足: ブランディングのトレンド**

2026年のブランディングトレンドとして、以下が注目されている[^3]:
- パーパス・ドリブン（社会的意義の明示）
- ストーリーテリング（物語性のある伝達）
- デジタル×リアルの統合体験

[^3]: ブランド・ジャパン2025 (日経BP) https://example.com
```

### パターン3: 別ファイル（大量の調査結果）

調査結果が膨大な場合は、別ファイルとして保存し、本文からリンク。

**例**:
```markdown
## 競合分析

詳細な競合分析は別途ドキュメント参照:
→ `hearing-materials/competitor-analysis.md`
```

---

## 情報の鮮度管理

### 調査日時の記録

```markdown
[^1]: 経済産業省「電子商取引に関する市場調査」(2025) https://example.com
      調査日: 2026-01-23
```

### 古い情報への注意喚起

```markdown
※この情報は2023年時点のものです。最新情報の確認を推奨します。
```

---

## 過剰な調査を避ける

### 調査不要なケース

1. **クライアントが明確に述べている事実**
   - 例: 「創業は2010年」「従業員数は50名」
   - → 外部調査不要（クライアント情報を信頼）

2. **一般常識・基礎知識**
   - 例: 「SEOは検索エンジン最適化」
   - → 調査不要（簡潔に説明するだけ）

3. **プロジェクトに直接関係ない情報**
   - 例: ブランディングプロジェクトで技術仕様の詳細
   - → 調査不要（焦点を絞る）

### 効率的な調査のポイント

- **1つの疑問に3回まで**のツール呼び出し
- **見つからなければ判断を保留**（無理に調査を続けない）
- **ユーザーに確認**すべき事項は、AskUserQuestionで質問

---

## チェックリスト

補足調査実施時に確認：

- [ ] クライアント情報との矛盾はないか
- [ ] 信頼性の高い情報源を使用しているか
- [ ] 出典URLを付記しているか
- [ ] 機密情報を外部ツールに送信していないか
- [ ] 調査結果が過剰になっていないか（本質から外れていないか）
- [ ] 調査日時を記録しているか

---

## まとめ

補足調査は、クライアントヒアリングの質を高める重要なステップ。
適切なツールを選び、セキュリティ原則を守りながら、効率的に情報を収集すること。
過剰な調査は避け、プロジェクトの本質に焦点を当てた補足を心がける。
