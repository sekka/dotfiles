---
name: organizing-hearings
description: クライアントヒアリング（ブランディング、ウェブ制作、ビジネス戦略など）のメモ整理・資料統合を行い、構造化されたドキュメントを生成するスキル
trigger_keywords:
  - "ヒアリング整理"
  - "ヒアリングメモ"
  - "メモを整理"
  - "資料を統合"
  - "スライドを反映"
  - "資料から追加"
  - "ヒアリングまとめ"
  - "クライアント資料"
version: 1.0.0
author: kei
---

<objective>
あらゆる種類のクライアントプロジェクト（ブランディング、ウェブ制作、ビジネス戦略など）において、
ヒアリングメモの整理とクライアント資料の統合を効率的に行い、信頼性の高い整理文書を生成する。

## このスキルができること

1. **ヒアリングメモの整理・文書化（WF1）**
   - 非構造化メモを論理的な文書に変換
   - 荒い表現・口語を整理
   - 外部調査で補足情報を追加
   - 出典を明確に区別
   - サマリーを自動生成

2. **クライアント資料の統合（WF2）**
   - 画像・PDFから情報を抽出
   - 既存文書に適切に配置
   - 出典ページ番号を付記
   - 矛盾を検出・解消
   - 差分を明示

## 対応プロジェクト種別

- ブランディング（ブランド戦略、VI、トンマナ）
- ウェブ制作（サイト設計、UX、コンテンツ）
- ビジネス戦略（事業計画、市場分析）
- その他（汎用テンプレート）

## 生成される成果物

- **整理文書（詳細版）**: 構造化されたMarkdownドキュメント
- **サマリー（1ページ）**: 意思決定者向けの概要
- **差分レポート**: 追加・変更された情報の一覧
</objective>

<quick_start>
## 使い方

### パターン1: ヒアリングメモの整理

```
ユーザー: "このヒアリングメモを整理して"
```

1. プロジェクト種別を確認（または自動判定）
2. メモを読み込み、情報を構造化
3. 外部調査で補足情報を追加
4. 整理文書とサマリーを生成

### パターン2: クライアント資料の統合

```
ユーザー: "この会社説明資料を整理文書に統合して"
```

1. 資料を読み込み、情報を抽出
2. 既存文書の適切なセクションに配置
3. 既存情報との整合性を確認
4. 更新された文書と差分レポートを生成

### トリガーキーワード

以下のキーワードでスキルが起動します:
- 「ヒアリング整理」「メモを整理」「まとめて」
- 「資料を統合」「スライドを反映」「資料から追加」
</quick_start>

<success_criteria>
## 成功の定義

1. **完全性**
   - メモ・資料の全情報が文書に反映されている
   - 不足情報が「要確認」としてリスト化されている

2. **構造化**
   - プロジェクト種別に応じた論理的なセクション構成
   - 読みやすく、検索しやすい

3. **信頼性**
   - 全ての情報に出典が明記されている
   - 確度の低い情報が明示されている
   - 矛盾が検出・報告されている

4. **実用性**
   - 詳細版で深い理解が可能
   - サマリーで迅速な把握が可能
   - 次のステップが明確
</success_criteria>

---

# 実装

## 1. ワークフロー分岐ロジック

スキル起動時、ユーザーの要求とコンテキストから適切なワークフローを選択:

### 分岐条件

```typescript
function selectWorkflow(userInput: string, context: Context): Workflow {
  // WF1トリガー: ヒアリングメモ関連のキーワード
  const wf1Keywords = [
    "ヒアリング整理", "メモを整理", "メモまとめ",
    "ヒアリングまとめ", "整理して"
  ];

  // WF2トリガー: 資料統合関連のキーワード
  const wf2Keywords = [
    "資料を統合", "スライドを反映", "資料から追加",
    "資料を反映", "資料追加"
  ];

  if (wf1Keywords.some(kw => userInput.includes(kw))) {
    return Workflow.ORGANIZE;
  }

  if (wf2Keywords.some(kw => userInput.includes(kw))) {
    return Workflow.INTEGRATE;
  }

  // 曖昧な場合はユーザーに確認
  return askUserForWorkflow();
}
```

### ユーザーへの確認

どちらのワークフローか不明な場合:

```typescript
AskUserQuestion({
  questions: [
    {
      question: "実施する作業を選択してください",
      header: "作業種別",
      options: [
        {
          label: "ヒアリングメモの整理",
          description: "非構造化メモを整理文書に変換"
        },
        {
          label: "クライアント資料の統合",
          description: "資料を既存文書に統合"
        }
      ],
      multiSelect: false
    }
  ]
});
```

---

## 2. ワークフロー1: ヒアリングメモの整理

詳細は `references/workflow-organize.md` を参照。

### 主要ステップ

1. **Phase 0: 事前準備**
   - プロジェクト種別の確認
   - メモファイルの読み込み

2. **Phase 1: プロジェクト種別の特定**
   - キーワードから自動判定
   - 判定不可の場合はユーザーに確認

3. **Phase 2: 情報の構造化**
   - メモの解析
   - 口語表現の書き言葉化
   - 論理的なセクション分け
   - 重複・矛盾の解消

4. **Phase 3: 補足情報の追加**
   - 補足が必要な情報の特定
   - WebSearch / Context7 / DeepWiki で調査
   - 調査結果の統合

5. **Phase 4: 出典の明記**
   - 情報源ごとに適切な表記
   - 確度の明示

6. **Phase 5: 出力生成**
   - 詳細版ドキュメント
   - サマリー

7. **Phase 6: 確認事項の整理**
   - 要確認リストの作成

### 使用するテンプレート

- `templates/hearing-document.md`
- `templates/summary.md`

### 参考ガイド

- `references/citation-patterns.md`（出典管理）
- `references/research-sources.md`（補足調査）

---

## 3. ワークフロー2: クライアント資料の統合

詳細は `references/workflow-integrate.md` を参照。

### 主要ステップ

1. **Phase 0: 事前準備**
   - 資料種別の確認
   - 資料ファイルと既存文書の読み込み

2. **Phase 1: 資料の読み取り**
   - テキスト・数値の抽出
   - 図表の解釈
   - キーメッセージの特定

3. **Phase 2: 配置先の決定**
   - セクションマッピング
   - 新規セクションの判断

4. **Phase 3: 統合・更新**
   - 既存情報との整合性チェック
   - 重複の解消
   - 出典ページ番号の付記

5. **Phase 4: 差分の明示**
   - 追加された情報のハイライト
   - 変更された情報の履歴

6. **Phase 5: 出力生成**
   - 更新された整理文書
   - 差分レポート

7. **Phase 6: 資料の整理**
   - 資料ファイルの管理
   - 資料一覧の更新

### 使用するテンプレート

既存の整理文書を更新（新規の場合は `templates/hearing-document.md` を使用）

### 参考ガイド

- `references/citation-patterns.md`（出典管理）

---

## 4. プロジェクト種別ごとのセクション構成

### ブランディングプロジェクト

```markdown
1. プロジェクト概要
2. クライアント情報
3. 現状分析（課題、競合、市場）
4. ブランドコンセプト
5. ターゲット
6. トンマナ・VI方針
7. タッチポイント
8. 制約条件・前提
9. 次のステップ
10. 補足情報
11. 確認事項
```

### ウェブ制作プロジェクト

```markdown
1. プロジェクト概要
2. クライアント情報
3. 現行サイト分析
4. 目的・KPI
5. ターゲットユーザー
6. サイト構成・機能要件
7. デザイン方針
8. 技術要件
9. 制約条件・前提
10. 次のステップ
11. 補足情報
12. 確認事項
```

### ビジネス戦略プロジェクト

```markdown
1. プロジェクト概要
2. クライアント情報
3. 事業概要
4. 市場環境
5. 競合分析
6. ビジネスモデル
7. 収益構造
8. 成長戦略
9. リスク・課題
10. 制約条件・前提
11. 次のステップ
12. 補足情報
13. 確認事項
```

### その他（汎用）

```markdown
1. プロジェクト概要
2. クライアント情報
3. 現状分析
4. 目的・ゴール
5. ターゲット
6. 主要セクション（プロジェクト固有）
7. 制約条件・前提
8. 次のステップ
9. 補足情報
10. 確認事項
```

---

## 5. 出典管理

`references/citation-patterns.md` に定義されたルールに従う:

| 情報源 | 表記 | 確度 |
|--------|------|------|
| ヒアリング | ※ヒアリングより | 要確認 |
| クライアント資料 | ※資料p.Xより | 高 |
| 外部調査（Web） | [^XX] 脚注 + URL | 中 |
| 推定 | ※推定（根拠：〜） | 低 |
| 一般知識 | 📝補足 or 注釈なし | 高 |

### 矛盾の扱い

情報源間で矛盾がある場合の優先順位:

1. クライアント資料（公式見解）
2. ヒアリング（最新情報の可能性）
3. 外部調査（参考情報）
4. 推定（最も不確実）

矛盾点は明記し、AskUserQuestionでユーザーに確認を促す。

---

## 6. 補足調査

`references/research-sources.md` に定義されたガイドラインに従う:

### 調査ツールの選択

```
補足情報が必要
  ↓
技術仕様・実装方法？
  YES → Context7
  NO  → 次へ
  ↓
業界動向・市場規模？
  YES → WebSearch
  NO  → 次へ
  ↓
特定のWebページ？
  YES → WebFetch
  NO  → WebSearchで広く検索
```

### セキュリティ原則

**IMPORTANT**: 以下の情報を外部ツールに送信禁止:
- 環境変数、APIキー
- 顧客データ、個人情報
- 社内システムURL
- プロプライエタリなコード

参考: `@.claude/rules/security.md`

---

## 7. ユーザーインタラクション

### AskUserQuestionの使用場面

1. **ワークフロー選択**（WF1 or WF2）
2. **プロジェクト種別確認**（自動判定不可の場合）
3. **不明瞭なメモの確認**
4. **配置先セクションの確認**（資料統合時）
5. **矛盾点の確認**

### フィードバックの提供

各ワークフロー完了後、以下を報告:

```markdown
## 📄 [ワークフロー名]が完了しました

### 生成されたファイル
- ファイル1: パスと概要
- ファイル2: パスと概要

### 実施内容
- 統計情報（セクション数、補足調査回数など）

### 要確認事項
- [ ] 確認事項1
- [ ] 確認事項2

### 次のステップ
1. ステップ1
2. ステップ2
```

---

## 8. エラーハンドリング

### メモ・資料が読み取れない

```typescript
AskUserQuestion({
  questions: [
    {
      question: "ファイルが読み取れませんでした。どうしますか？",
      header: "対応",
      options: [
        { label: "再試行", description: "別の方法で提供" },
        { label: "手動入力", description: "内容を教えてください" },
        { label: "スキップ", description: "この部分は省略" }
      ],
      multiSelect: false
    }
  ]
});
```

### プロジェクト種別が判定できない

```typescript
AskUserQuestion({
  questions: [
    {
      question: "プロジェクト種別を判定できませんでした。選択してください",
      header: "種別",
      options: [
        { label: "ブランディング", description: "..." },
        { label: "ウェブ制作", description: "..." },
        { label: "ビジネス戦略", description: "..." },
        { label: "その他", description: "汎用テンプレート" }
      ],
      multiSelect: false
    }
  ]
});
```

### 補足調査で情報が見つからない

- 3回まで試行
- 見つからない場合は「要確認」としてマーク
- ユーザーに「外部調査では確認できませんでした」と報告

---

## 9. 品質チェック

各ワークフロー完了前に以下を確認:

### WF1: ヒアリングメモ整理

- [ ] プロジェクト種別が特定されている
- [ ] メモの全情報が反映されている
- [ ] 口語表現が整理されている
- [ ] 補足調査が実施されている
- [ ] 全情報に出典が付記されている
- [ ] 詳細版とサマリーが生成されている

### WF2: 資料統合

- [ ] 資料の全ページが確認されている
- [ ] 情報が適切なセクションに配置されている
- [ ] 出典ページ番号が付記されている
- [ ] 既存情報との整合性が確認されている
- [ ] 矛盾点が明記されている
- [ ] 差分が明示されている

---

## 10. 参考資料

### スキル内ドキュメント

- `references/workflow-organize.md`: WF1の詳細手順
- `references/workflow-integrate.md`: WF2の詳細手順
- `references/citation-patterns.md`: 出典管理ルール
- `references/research-sources.md`: 補足調査ガイド
- `templates/hearing-document.md`: 整理文書テンプレート
- `templates/summary.md`: サマリーテンプレート

### グローバルルール

- `@.claude/rules/tech-research.md`: 技術調査ガイド
- `@.claude/rules/security.md`: セキュリティ原則
- `@.claude/rules/code-review-workflow.md`: AskUserQuestionの使い方

---

## 11. 実装例

### 例1: ブランディングプロジェクトのヒアリング整理

```
ユーザー: "このブランディングのヒアリングメモを整理して"

Claude:
1. メモを読み込み
2. キーワードから「ブランディング」と判定
3. ブランディング用セクション構成を選択
4. メモを構造化（ブランドコンセプト、ターゲット等に分類）
5. WebSearchで市場動向を補足
6. 整理文書とサマリーを生成
7. 要確認リストを提示
```

### 例2: 会社説明資料の統合

```
ユーザー: "この会社説明資料を整理文書に統合して"

Claude:
1. 資料（PDF）を読み込み
2. 既存の整理文書を読み込み
3. 各ページから情報を抽出
4. 適切なセクションに配置（企業概要→クライアント情報、市場データ→現状分析）
5. 既存情報と比較（矛盾チェック）
6. 出典ページ番号を付記
7. 更新文書と差分レポートを生成
```

---

## まとめ

このスキルは、あらゆるクライアントプロジェクトのヒアリング作業を効率化し、
信頼性の高い整理文書を生成する汎用的なツール。

**重要な特徴**:
- プロジェクト種別に柔軟に対応
- 出典管理で信頼性を確保
- 外部調査で情報を補完
- ユーザーインタラクションで曖昧さを排除
- 2つのワークフローで異なるニーズに対応

**次のステップ**:
1. このスキルを試す: `/organizing-hearings`
2. フィードバックを歓迎: 改善点があれば教えてください
