---
name: code-review
description: コード品質、セキュリティ脆弱性、パフォーマンス問題、ベストプラクティス遵守を評価します。コードレビューやコード品質改善が必要な場合に使用してください。
allowed-tools: Read, Grep, Glob
---

# コードレビュー

## Quick Start

1. 対象コードを Read ツールで読み込む
2. 以下のチェックリストに沿って評価
3. 優先度付きで問題点と改善提案を出力

## レビューチェックリスト

### セキュリティ（優先度: クリティカル）

- [ ] SQL インジェクション: ユーザー入力がクエリに直接埋め込まれていないか
- [ ] XSS 脆弱性: 出力がエスケープされているか
- [ ] 認証・認可: 適切なアクセス制御が実装されているか
- [ ] 機密情報: ハードコードされた認証情報やAPIキーがないか

### パフォーマンス（優先度: 重要）

- [ ] アルゴリズム効率: O(n²) 以上のループがないか
- [ ] N+1 問題: ループ内でのDB/APIクエリがないか
- [ ] メモリ使用: 大量データの一括読み込みがないか
- [ ] 不要な再計算: キャッシュすべき処理がないか

### 保守性（優先度: 改善推奨）

- [ ] 関数の長さ: 50行以上の関数がないか
- [ ] 命名: 意図が明確な命名になっているか
- [ ] 重複: DRY原則に反するコードがないか
- [ ] 結合度: モジュール間の依存が適切か

### テスト

- [ ] カバレッジ: 主要パスがテストされているか
- [ ] エッジケース: 境界値、null、空配列が考慮されているか

## 出力フォーマット

```markdown
## レビュー結果

### クリティカル

- **[ファイル:行番号]** 問題の説明
  - 修正案: 具体的なコード例

### 重要

- ...

### 改善推奨

- ...

## 総評

全体的な評価と推奨アクション
```
