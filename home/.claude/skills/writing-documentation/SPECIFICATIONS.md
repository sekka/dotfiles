# 機能仕様書作成ガイド

## 実行フロー

### Step 1: 情報収集

#### ステークホルダーの要求

- ビジネス目標とKPI
- ユーザーの課題と動機
- 技術的な制約
- 競合や類似機能の調査

#### 要件の整理

- 機能要件: 何をするか
- 非機能要件: どの程度の品質で動作するか
- 制約条件: 技術的・ビジネス的な制限

### Step 2: ユーザーストーリーの作成

#### INVEST原則

ユーザーストーリーは以下の基準を満たすこと：

- **I**ndependent: 他のストーリーから独立
- **N**egotiable: 詳細は交渉可能
- **V**aluable: ユーザーに価値を提供
- **E**stimable: 見積もり可能なサイズ
- **S**mall: 1スプリントで完了可能
- **T**estable: テスト可能な受け入れ条件

#### ユーザーストーリー形式

```
As a [ユーザータイプ],
I want [機能/アクション],
So that [得られる価値/理由].
```

#### 受け入れ条件（Gherkin形式）

```gherkin
Given [前提条件]
When [アクション]
Then [期待される結果]
And [追加の確認事項]
```

### Step 3: 機能仕様書の構成

- 概要: 機能の目的と価値
- ユーザーストーリー: As a / I want / So that
- 機能要件: Must / Should / Could / Won't Have
- 非機能要件: パフォーマンス、セキュリティ、アクセシビリティ
- ユーザーフロー: 操作の流れ
- データモデル: エンティティ設計
- API仕様: エンドポイント定義
- 受け入れ条件: シナリオ別テストケース
- エッジケース: エラーハンドリング
- テスト観点: 単体・統合・E2E
- 成功指標: KPI

### Step 4: 優先順位付け

#### RICE スコアリング

```
RICE Score = (Reach × Impact × Confidence) / Effort

- Reach: 影響を受けるユーザー数
- Impact: 1ユーザーあたりの影響度（0.25-3.0）
- Confidence: 見積もりの確信度（0-100%）
- Effort: 必要工数（人月）
```

#### MoSCoW 分類

| 分類            | 説明                             |
| --------------- | -------------------------------- |
| **Must have**   | 必須（これがないとリリース不可） |
| **Should have** | 重要（できれば入れたい）         |
| **Could have**  | あると嬉しい（余裕があれば）     |
| **Won't have**  | 今回は対象外                     |

### Step 5: レビューとフィードバック

- ステークホルダーレビュー: ビジネス要件確認
- 開発チームレビュー: 技術的実現可能性
- QAレビュー: テスト観点の網羅性

## 仕様書の品質基準

1. **明確性**: 曖昧な表現がない、専門用語が定義されている
2. **完全性**: 必要な情報が網羅されている
3. **一貫性**: 矛盾する記述がない
4. **検証可能性**: テストで確認できる
5. **追跡可能性**: 要件の出所が明確

## 出力成果物

1. **機能仕様書**: 完全な仕様ドキュメント
2. **ユーザーストーリー**: INVEST原則に基づくストーリー
3. **受け入れ条件**: Gherkin形式のテストシナリオ
4. **優先順位表**: RICEスコア付きの機能リスト

## ベストプラクティス

1. **ユーザー中心**: ユーザーの課題にフォーカス
2. **段階的詳細化**: 最初は概要から、必要に応じて詳細追加
3. **コラボレーション**: ステークホルダーを巻き込む
4. **適切な粒度**: 1スプリントで完了可能なサイズ
5. **継続的更新**: 実装中の学びを反映
