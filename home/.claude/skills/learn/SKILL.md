---
name: learn
description: セッションから知識を抽出してSkill化する
disable-model-invocation: false
---

# セッション知識の持続化

現在のセッションで学んだパターン、解決策、ベストプラクティスを新しいSkillとして保存する。

## 使用タイミング

- セッション終了前（`/clear`や`/context compact`の前）
- 重要な知見を得たとき
- 再利用可能なパターンを発見したとき
- プロジェクト固有の規約を確立したとき

## 実行手順

このスキルは以下の3ステップで知識を抽出・保存します：

### Step 1: セッション内容の調査

現在のセッションで以下を特定：

1. **解決した問題**
   - どんな課題があったか？
   - どのように解決したか？

2. **発見したパターン**
   - 再利用可能なコード・設計パターン
   - 効率的なワークフロー

3. **学んだベストプラクティス**
   - 失敗から学んだこと
   - 成功した手法

4. **プロジェクト固有の知識**
   - チーム規約
   - 独自の制約・要件

### Step 2: 知識の構造化

抽出した知識を以下の形式で整理：

```markdown
# [スキル名]

## 概要
[このスキルが解決する問題]

## 使用場面
- [シナリオ1]
- [シナリオ2]

## パターン/手法
[具体的な実装パターンやコード例]

## 注意事項
[落とし穴、制約、トレードオフ]

## 実践例
[実際の使用例]
```

### Step 3: Skill/ルールファイルとして保存

適切な場所に保存：

**新規Skillとして保存:**
```
~/.claude/skills/[skill-name]/SKILL.md
```

**既存ルールファイルに追記:**
```
~/.claude/rules/[category].md
```

**メモリとして保存（Serena）:**
```typescript
write_memory({
  memory_file_name: "[topic].md",
  content: "..."
});
```

## 判断基準

### 新規Skillを作成すべき場合

- [ ] 他のプロジェクトでも再利用できる
- [ ] 複数ステップのワークフローがある
- [ ] ユーザーが繰り返し実行する操作

### ルールファイルに追記すべき場合

- [ ] 既存のカテゴリに該当する（TDD、セキュリティ等）
- [ ] 原則・ガイドライン的な内容
- [ ] コンテキストとして常に参照すべき

### メモリに保存すべき場合

- [ ] プロジェクト固有の一時的な情報
- [ ] 実験的な知見（確立されていない）
- [ ] 調査結果のメモ

## 実行例

### 例1: セキュリティパターンの発見

**セッション内容:**
- JWT検証のセキュリティ脆弱性を修正
- トークン再利用攻撃への対策を実装

**抽出した知識:**
```markdown
# JWT セキュアハンドリング

## パターン
- jtiクレームで一意性を保証
- リフレッシュトークンのローテーション
- トークンの有効期限チェック

## 実装例
[コード例]
```

**保存先:**
- `~/.claude/rules/security.md` に追記（既存カテゴリ）

---

### 例2: 新しいワークフロー発見

**セッション内容:**
- Figmaデザインからコンポーネント実装の効率的な手順を確立

**抽出した知識:**
```markdown
# Figma to Code Workflow

## ステップ
1. Figma URLから変数抽出
2. デザイントークン生成
3. コンポーネント骨組み作成
4. スタイリング実装
5. インタラクション追加
```

**保存先:**
- `~/.claude/skills/figma-to-code/SKILL.md` として新規作成（再利用可能なワークフロー）

---

### 例3: プロジェクト固有の規約

**セッション内容:**
- チーム独自のコミットメッセージ規約を確認

**抽出した知識:**
```markdown
# プロジェクトXコミット規約

## フォーマット
[type](scope): subject

## Type一覧
- feat: 新機能
- fix: バグ修正
- docs: ドキュメント
```

**保存先:**
- Serenaメモリ `project-x-commit-convention.md`（プロジェクト固有）

---

## 使用方法

```
/learn
```

または

```
知識を保存して
今回のセッションで学んだことをSkill化して
```

## 注意事項

- **セッション終了前に実行推奨**: `/clear`すると履歴が失われる
- **一般化する**: プロジェクト固有の詳細は抽象化
- **簡潔に**: 本質だけを抽出（詳細すぎない）
- **重複チェック**: 既存のSkill/ルールと重複しないか確認

## チェックリスト

実行前:

- [ ] セッションで重要な知見を得たか？
- [ ] 再利用可能なパターンか？
- [ ] 既存のSkill/ルールと重複しないか？

実行後:

- [ ] 適切な場所に保存したか？
- [ ] ファイル名は分かりやすいか？
- [ ] 将来の自分が理解できる内容か？

---

## 実装詳細

<implementation>

### 知識抽出プロセス

1. **セッション履歴の分析**

```typescript
// 現在のセッションを振り返る
// - ユーザーの質問
// - 解決した問題
// - 実装したコード
// - 得られた知見
```

2. **パターンの特定**

```typescript
// 再利用可能な要素を抽出:
// - コードパターン
// - ワークフロー
// - 意思決定基準
// - トラブルシューティング手法
```

3. **構造化と保存**

```typescript
// ユーザーに確認:
AskUserQuestion({
  questions: [{
    question: "どこに保存しますか？",
    header: "保存先",
    options: [
      {
        label: "新規Skill",
        description: "再利用可能なワークフロー"
      },
      {
        label: "既存ルールファイル",
        description: "原則・ガイドライン"
      },
      {
        label: "Serenaメモリ",
        description: "プロジェクト固有の一時情報"
      }
    ],
    multiSelect: false
  }]
});

// 保存実行
Write({
  file_path: "~/.claude/skills/[skill-name]/SKILL.md",
  content: "..."
});
```

</implementation>

---

## 参考資料

- FabyΔ「Claude Code 超完全ガイド」: 継続学習パターン
- `memorizing`スキル: メモリ保存の既存実装
