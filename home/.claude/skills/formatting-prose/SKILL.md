# Markdown → 散文変換スキル

## 役割

過度にフォーマットされた Markdown 文章を、流れのある散文的な文章に変換する。生成 AI が出力した冗長で箇条書き過多のレポートを、読みやすく簡潔な文章に整形する。

---

## 目的

生成 AI（Claude、ChatGPT、Gemini 等）が出力した文章は、しばしば以下の問題を抱えている：

- **箇条書きの濫用**: 本来は段落で説明すべき内容をリストにしている
- **過度な強調**: 太字や斜体が多すぎて読みにくい
- **冗長な構造**: セクション分けが細かすぎる

このスキルは、これらの問題を解決し、自然な文章の流れを取り戻す。

---

## 変換の原則

### 1. リストを段落に統合

**変換前（箇条書き過多）:**

```markdown
以下の理由で重要です：

- パフォーマンスが向上する
- コードが読みやすくなる
- メンテナンスが容易になる
```

**変換後（散文的）:**

```markdown
この手法は、パフォーマンスの向上、コードの可読性改善、メンテナンス性の向上という3つの点で重要である。
```

### 2. 過度な強調を削除

**変換前:**

```markdown
この機能は**非常に重要**であり、*必ず*実装する**べき**です。
```

**変換後:**

```markdown
この機能は非常に重要であり、必ず実装すべきである。
```

### 3. セクション構造の簡素化

**変換前（セクション細分化）:**

```markdown
## 背景
### 問題点
#### 具体例
```

**変換後（自然な見出し）:**

```markdown
## 背景と問題点
```

---

## 保持する要素

以下の要素は**削除せず保持**する：

### 1. インラインコード

```markdown
`const foo = 'bar'` のような記述は保持
```

### 2. コードブロック

````markdown
```javascript
function example() {
  return true;
}
```
````

### 3. 見出し

```markdown
## セクションタイトル
### サブセクション
```

ただし、過度に細分化された見出しは統合する。

---

## リストの使用条件

リストは以下の場合のみ使用を許可する：

### 1. 真に離散的な項目

**OK（離散的なアイテム）:**

```markdown
対応ブラウザ：
- Chrome 90+
- Firefox 88+
- Safari 14+
```

**NG（段落にすべき）:**

```markdown
この機能の利点：
- パフォーマンスが良い
- 使いやすい
- 保守性が高い
```

→ 「この機能はパフォーマンス、使いやすさ、保守性の点で優れている」と散文化すべき。

### 2. ユーザーが明示的に要求

ユーザーが「箇条書きで」「リストで」と指定した場合のみ、リストを使用する。

---

## 実行フロー

### Step 1: 入力の受け取り

ユーザーから Markdown 形式の文章を受け取る。

### Step 2: リストの統合

箇条書き（`-`、`*`、`1.`）を段落に変換する。

**変換例:**

**入力:**

```markdown
以下の3つの理由があります：

- 理由A
- 理由B
- 理由C
```

**出力:**

```markdown
理由A、理由B、理由Cという3つの理由がある。
```

### Step 3: 強調の削除

`**太字**` と `*斜体*` を削除し、通常のテキストに戻す。

ただし、見出し（`##`）やコード（`` `code` ``）は保持する。

### Step 4: セクション構造の最適化

過度に細分化された見出しを統合し、2〜3階層に収める。

### Step 5: 流れのある文章に再構成

段落間の接続詞（「また」「さらに」「一方」「その結果」）を適切に挿入し、自然な流れを作る。

---

## 変換例

### 入力（箇条書き過多の AI 出力）

```markdown
## パフォーマンス最適化

以下の手法が有効です：

- **遅延読み込み**: 画像やスクリプトを必要になるまで読み込まない
- **コード分割**: バンドルサイズを削減
- **キャッシング**: リピートユーザーの体験を改善

これらを実装することで、以下のメリットがあります：

- ページ読み込み速度が向上
- ユーザー体験が改善
- SEO 評価が上がる
```

### 出力（散文的に変換）

```markdown
## パフォーマンス最適化

遅延読み込み、コード分割、キャッシングという3つの手法が有効である。遅延読み込みは、画像やスクリプトを必要になるまで読み込まないことで初期表示を高速化する。コード分割によりバンドルサイズを削減でき、キャッシングはリピートユーザーの体験を改善する。

これらを実装することで、ページ読み込み速度の向上、ユーザー体験の改善、SEO 評価の向上という3つのメリットが得られる。
```

---

## ガイドライン

### 段落の長さ

- **最適**: 3〜5文
- **避ける**: 1文だけの段落、10文以上の長大な段落

### 接続詞の使用

段落間を自然につなぐため、以下のような接続詞を活用する：

- **列挙**: また、さらに、加えて
- **対比**: 一方、しかし、それに対して
- **因果**: その結果、それゆえ、したがって
- **例示**: 例えば、具体的には、特に

### 簡潔さの優先

冗長な表現は削除し、簡潔に伝える。

**冗長:**

```
この機能を使用することによって、ユーザーはより良い体験を得ることができるようになります。
```

**簡潔:**

```
この機能によりユーザー体験が向上する。
```

---

## 保持すべきリストの例

以下のようなリストは**削除せず保持**する：

### チェックリスト形式

```markdown
完了条件：
- [ ] ユニットテストが通過
- [ ] ドキュメントを更新
- [ ] PR レビューが承認済み
```

### 離散的なアイテム

```markdown
対応言語：
- JavaScript
- TypeScript
- Python
```

### テーブル

```markdown
| 項目 | 値 |
|------|-----|
| CPU  | 4コア |
| RAM  | 16GB |
```

---

## 実践例

### 入力（AI 生成の冗長な文章）

```markdown
# Web パフォーマンス最適化ガイド

## はじめに

Web パフォーマンスは**非常に重要**です。以下の理由があります：

- ユーザー体験が向上する
- SEO 評価が上がる
- コンバージョン率が改善する

## 具体的な手法

### 1. 画像最適化

以下の手法を使います：

- **WebP 形式**: ファイルサイズが小さい
- **遅延読み込み**: 初期表示を高速化
- **レスポンシブ画像**: デバイスに応じて最適化

### 2. JavaScript 最適化

以下が重要です：

- コード分割
- Tree Shaking
- Minify
```

### 出力（散文的に変換）

```markdown
# Web パフォーマンス最適化ガイド

## はじめに

Web パフォーマンスは、ユーザー体験の向上、SEO 評価の改善、コンバージョン率の向上という3つの点で重要である。

## 画像と JavaScript の最適化

画像最適化では、WebP 形式の採用によるファイルサイズ削減、遅延読み込みによる初期表示の高速化、レスポンシブ画像によるデバイス別最適化が有効である。

JavaScript 最適化では、コード分割、Tree Shaking、Minify という3つの手法を組み合わせることで、バンドルサイズを大幅に削減できる。
```

---

## 制約

- `inline code`、コードブロック、見出しは削除しない
- チェックリストやテーブルは保持する
- 真に離散的なアイテム（ブラウザ一覧、言語一覧等）のリストは保持
- ユーザーが明示的に「箇条書きで」と要求した場合のみリストを使用

---

## トリガーキーワード

- 「散文的にして」
- 「箇条書きを減らして」
- 「読みやすく整形して」
- 「Markdown を整理して」
- 「リストを段落に」
