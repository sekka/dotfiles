---
name: frontend-knowledge-collector
description: URLや記事内容からフロントエンド技術のナレッジを要約・蓄積・整理します。参考URLを渡されたとき、またはナレッジの整理を依頼されたときに使用してください。
---

# フロントエンドナレッジ収集・整理

## 概要

ユーザーから提供されたURL・記事内容を要約し、`frontend-techniques` スキルのナレッジベースに追加・整理する。

## モード

### 1. 追加モード（デフォルト）
- URLが渡された場合
- 「この記事を保存して」「ナレッジに追加して」等の依頼

### 2. 整理モード
- 「ナレッジを整理して」「重複を確認して」等の依頼
- 特定カテゴリの整理: 「css-layout.md を整理して」

## 実行フロー

### Step 1: コンテンツ取得

URLが渡された場合は `WebFetch` で内容を取得。

### Step 2: 要約・構造化

**人間が直接参照できるデータ集**として、以下を意識:
- 専門用語には簡潔な説明を添える
- コード例は実際にコピペして使えるレベルに
- 「なぜこの方法が良いのか」の理由を明記
- ブラウザサポート状況は具体的に記載

以下のフォーマットで要約：

```markdown
## [テクニック名]

> 出典: [URL]
> 執筆日: [YYYY-MM-DD]（記事の公開日・更新日。不明な場合は「不明」）
> 追加日: [YYYY-MM-DD]

[1〜3文で概要を説明]

### コード例

\```css
/* または js/html */
[実用的なコード例]
\```

### ユースケース
- [具体的な使用場面1]
- [具体的な使用場面2]

### 注意点
- [ブラウザサポート、制限事項など]

---
```

### Step 3: カテゴリ判定

以下のカテゴリから最適なものを選択：

| カテゴリ | ファイル | 対象 |
|---------|---------|------|
| レイアウト | `css-layout.md` | Grid, Flexbox, 配置, Container Queries |
| アニメーション | `css-animation.md` | Transitions, Keyframes, View Transitions |
| セレクタ | `css-selectors.md` | :has(), :is(), 擬似クラス |
| タイポグラフィ | `css-typography.md` | フォント, テキスト処理 |
| カラー | `css-colors.md` | 色, テーマ, カスタムプロパティ |
| モダンCSS | `css-modern.md` | @layer, @scope, 新機能 |
| JavaScript | `javascript-patterns.md` | DOM, イベント, 非同期 |
| パフォーマンス | `performance.md` | 最適化, Core Web Vitals |
| アクセシビリティ | `accessibility.md` | a11y, ARIA, フォーカス |
| Tailwind | `tailwind.md` | Tailwind CSS 関連 |

### Step 4: ファイル更新

1. `~/.claude/skills/frontend-techniques/[カテゴリ].md` を Read
2. 既存コンテンツの末尾に新しいテクニックを追加
3. ファイルが存在しない場合は新規作成

### Step 5: 確認

追加完了後、以下を報告：
- 追加したテクニック名
- 保存先カテゴリ
- 要約内容のプレビュー

## 複数テクニックを含む記事の場合

1つの記事に複数のテクニックがある場合：
- 各テクニックを個別エントリとして追加
- 同じ出典URLを記載
- 関連がある場合は相互参照を記載

## 類似ナレッジの検出と統合（追加時）

追加前に既存ナレッジとの類似性を確認：

### チェック項目
1. **同一URL**: 既に存在する場合は更新として扱う
2. **類似テクニック**: 同じ概念・機能を扱っている場合

### 類似が見つかった場合のアクション
- **矛盾なし**: 既存エントリに統合して強化
- **アップデート**: 新情報で既存を更新（旧情報は「以前の方法」として残す場合あり）
- **矛盾あり**: 両論併記し、推奨を明示
- **別観点**: 別エントリとして追加（相互参照を記載）

### 統合時の報告
```
🔄 類似ナレッジを検出・統合しました

既存: 「CSS Grid の基本」（執筆: 2023-06）
新規: 「Grid Layout 実践ガイド」（執筆: 2024-08）

→ 統合: 「CSS Grid レイアウト完全ガイド」として強化
  - 基本構文（既存）+ 実践パターン（新規）を統合
  - ブラウザサポート情報を最新化
```

## カテゴリが不明な場合

ユーザーに確認するか、最も近いカテゴリに追加。
新カテゴリが必要な場合は `SKILL.md` のカテゴリ一覧も更新。

## 出力例（追加モード）

```
✅ ナレッジを追加しました

📁 カテゴリ: css-layout.md
📝 テクニック: Container Queries の実践的パターン
🔗 出典: https://example.com/container-queries

### 追加内容プレビュー:
> コンテナクエリを使用してコンポーネント単位の
> レスポンシブデザインを実現する方法...
```

---

## 整理モード

「ナレッジを整理して」「重複チェックして」等で発動。

### 整理タスク

#### 1. 類似ナレッジの統合

**統合プロセス:**
1. 類似エントリを検出したら内容を比較
2. 矛盾がないか確認（矛盾がある場合は執筆日が新しい方を優先、または両論併記）
3. 問題なければ1つの強いナレッジに統合

**統合の判断基準:**
- **同一テクニック**: 完全統合（より詳細・最新の情報を残す）
- **アップデート関係**: 新情報で上書き、旧情報は「以前の方法」として注記
- **補完関係**: 両方の知見を合わせてより包括的なエントリに
- **矛盾あり**: 両論併記し、どちらが推奨かを明記

**統合後のフォーマット:**
```markdown
## [テクニック名]

> 出典: [URL1], [URL2]（複数の場合はカンマ区切り）
> 執筆日: [最新の執筆日]（統合元: [日付1], [日付2]）
> 追加日: [最初の追加日] / 統合日: [YYYY-MM-DD]

[統合された包括的な説明]
```

#### 2. 古い情報の更新
- 執筆日が2年以上前のエントリを優先確認
- ブラウザサポートが変わったもの
- より良い方法が登場したもの
- 非推奨になったもの（削除 or 注記追加）

#### 3. カテゴリの再編成
- 肥大化したカテゴリの分割提案
- 誤分類の移動
- 関連テクニックの相互参照追加

#### 4. フォーマット統一
- コード例の書式統一
- セクション構造の統一
- 不足情報（ユースケース、注意点）の補完提案

### 整理フロー

1. 対象カテゴリファイルを Read
2. 以下を分析:
   - 重複エントリ
   - 古い情報（執筆日から2年以上経過、または執筆日不明で追加日から1年以上経過）
   - フォーマット不統一
   - 肥大化（20エントリ以上）
3. 改善提案をリスト化
4. ユーザー承認後に実行

### 出力例（整理モード）

```
📊 css-layout.md の分析結果

エントリ数: 15件
最終更新: 2025-01-15

### 検出された課題

1. 🔄 重複の可能性
   - 「Flexbox gap」と「Flexbox の gap プロパティ」が類似

2. ⚠️ 古い情報
   - 「IE対応のGrid fallback」（執筆: 2021-03）
     → IE サポート終了済み、削除を推奨

3. 📝 フォーマット不統一
   - 3件のエントリに「ユースケース」セクションがない

### 推奨アクション
- [ ] 重複を統合する
- [ ] 古い情報を削除する
- [ ] フォーマットを統一する

実行しますか？
```

### 定期整理の推奨

以下のタイミングで整理を実行:
- カテゴリが20エントリを超えたとき
- 3ヶ月に1回の定期メンテナンス
- 大きな仕様変更があったとき（新ブラウザ機能など）
