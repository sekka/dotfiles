# ============================================
# mise Configuration
# ============================================
# miseã¯é–‹ç™ºç’°å¢ƒç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™
# Node.jsã€Pythonã€Rubyç­‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™
#
# ä½¿ç”¨æ–¹æ³•:
# mise run <task>        # ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
# mise run <alias>       # ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
# mise list              # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ„ãƒ¼ãƒ«ä¸€è¦§
# mise install           # .mise.tomlã®è¨­å®šã«åŸºã¥ã„ã¦ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

# ============================================
# Environment Variables (ç’°å¢ƒå¤‰æ•°è¨­å®š)
# ============================================
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§ä½¿ç”¨ã•ã‚Œã‚‹ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©
[env]
# Homebrew ã®ãƒã‚¤ãƒŠãƒªã‚’ PATH ã«è¿½åŠ ï¼ˆnode-gyp ç­‰ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ç”¨ï¼‰
_.path = ["/opt/homebrew/bin"]
# sharp ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ã® libvips ã‚’ç„¡è¦–ã—ã€prebuilt ãƒã‚¤ãƒŠãƒªã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†å¼·åˆ¶
SHARP_IGNORE_GLOBAL_LIBVIPS = "true"

# ============================================
# Global Settings (ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š)
# ============================================
[settings]
# å®Ÿé¨“çš„æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ï¼ˆæ–°æ©Ÿèƒ½ã‚’è©¦ã—ãŸã„å ´åˆã¯trueï¼‰
experimental = true
# ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœŸé–“
fetch_remote_versions_cache = "1h"
# ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
fetch_remote_versions_timeout = "10s"
# ä¸¦åˆ—å®Ÿè¡Œã‚¸ãƒ§ãƒ–æ•°ï¼ˆCPUã‚³ã‚¢æ•°ã«å¿œã˜ã¦èª¿æ•´ï¼‰
jobs = 4
# ãƒ¬ã‚¬ã‚·ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.nvmrcã€.ruby-versionç­‰ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆ
legacy_version_file = true
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è‡ªå‹•æ›´æ–°ãƒã‚§ãƒƒã‚¯ã®é–“éš”
plugin_autoupdate_last_check_duration = "7 days"
# ä¿¡é ¼ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆã“ã‚Œã‚‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®.mise.tomlã¯è‡ªå‹•çš„ã«ä¿¡é ¼ã•ã‚Œã‚‹ï¼‰
trusted_config_paths = ["~/dotfiles", "~/src/**", "~/projects/**"]

# --------------------------------------
# AWSé–¢é€£
# --------------------------------------
[tasks.aws-login]
alias = "al"
description = "AWS SSOãƒ­ã‚°ã‚¤ãƒ³"
run = "aws sso login"

# --------------------------------------
# GitHub/é–‹ç™ºãƒ„ãƒ¼ãƒ«
# --------------------------------------
[tasks.browserslist]
alias = "bl"
description = "Browserslistæ›´æ–°"
run = "npx browserslist@latest --update-db"

[tasks.gh-list-deploy]
description = "ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œå±¥æ­´ã‚’è¡¨ç¤ºã™ã‚‹"
run = """
gh run list \
    --repo firstcontributions/first-contributions \
    --limit 10
"""

# --------------------------------------
# Gitæ“ä½œ
# --------------------------------------
# Git logè¡¨ç¤ºï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰
[tasks.git-log-glog]
description = "ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¯ãƒ³ãƒ©ã‚¤ãƒ³è¡¨ç¤º"
run = """
git log \
    --graph \
    --date=short \
    --pretty='format:%C(yellow)%h%C(reset) %C(green)%ad%C(reset) %C(blue)%an%C(reset)%C(red)%d%C(reset) %s'
"""

# Git logè¡¨ç¤ºï¼ˆè©³ç´°ï¼‰
[tasks.git-log-glogd]
description = "è©³ç´°è¡¨ç¤ºï¼ˆç›¸å¯¾æ™‚é–“ã€å…¨ãƒ–ãƒ©ãƒ³ãƒï¼‰"
run = """
git log \
    --graph \
    --all \
    --date=relative \
    --pretty='format:%C(yellow)%h%C(reset) %C(green)(%ar)%C(reset) %C(blue)%an%C(reset)%C(red)%d%C(reset) %s'
"""

# Git logè¡¨ç¤ºï¼ˆçµ±è¨ˆä»˜ãï¼‰
[tasks.git-log-glogs]
description = "çµ±è¨ˆæƒ…å ±ä»˜ãè©³ç´°è¡¨ç¤ºï¼ˆå¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«æ•°è¡¨ç¤ºï¼‰"
run = """
git log \
    --graph \
    --stat \
    --date=iso \
    --pretty='format:%C(yellow)commit %H%C(reset)%C(red)%d%C(reset)%nAuthor: %C(blue)%an <%ae>%C(reset)%nDate:   %C(green)%ad%C(reset)%n%n    %s%n'
"""

# ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ„ãƒ¼ãƒ«
[tasks.git-util-difit-browser]
description = "ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‹ã"
run = "difit"

[tasks.git-util-difit-tui]
description = "ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’TUIã§é–‹ã"
run = "difit --tui"

[tasks.git-util-hbr]
description = "ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã"
run = "hub browse $(ghq list | fzf | cut -d '/' -f 2,3)"

# Claude Codeé–¢ä¿‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º
[tasks.llm-claude-ccexp]
description = "Claude Codeé–¢ä¿‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º"
run = "ccexp"

# --------------------------------------
# LLM/AIé–¢é€£
# --------------------------------------
# Claude Codeå†é–‹ãƒ„ãƒ¼ãƒ«
[tasks.llm-claude-ccresume]
description = "Claude Codeã®claude --resumeã‚’ä½¿ã„ã‚„ã™ãã™ã‚‹"
run = "ccresume"

# Claude Codeã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œç´¢
[tasks.llm-claude-ccsearch]
description = "Claude Codeã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œç´¢ãƒ»å…±æœ‰"
run = "ccsearch"

# Claude Codeä½¿ç”¨çŠ¶æ³
[tasks.llm-claude-ccusage]
description = "Claude Codeã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½¿ç”¨çŠ¶æ³ã‚’è¡¨ç¤º"
run = "ccusage"

# Claude Code permissions.allowã‚’ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ã‚½ãƒ¼ãƒˆ
[tasks.llm-claude-sort-permissions]
alias = "ccsp"
description = "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®.claude/settings.local.jsonã®permissionsã‚’ã‚½ãƒ¼ãƒˆ"
run = """
bun -e "
const fs = require('fs');
const path = '.claude/settings.local.json';
if (!fs.existsSync(path)) { console.error('âŒ File not found:', path); process.exit(1); }
const data = JSON.parse(fs.readFileSync(path, 'utf8'));
let sorted = false;
if (data.permissions?.allow) { data.permissions.allow.sort((a, b) => a.localeCompare(b)); sorted = true; }
if (data.permissions?.deny) { data.permissions.deny.sort((a, b) => a.localeCompare(b)); sorted = true; }
if (data.permissions?.ask) { data.permissions.ask.sort((a, b) => a.localeCompare(b)); sorted = true; }
if (sorted) {
  fs.writeFileSync(path, JSON.stringify(data, null, 2) + '\\n');
  console.log('âœ… Sorted permissions in', path);
} else {
  console.log('âš ï¸  No permissions found in', path);
}
"
"""

# codemass
[tasks.llm-codemass]
description = "codemassã‚’èµ·å‹•"
run = "codemass"

# cc-sdd
[tasks.ccsdd-install]
description = "cc-sddã‚’å°å…¥"
run = "npx cc-sdd@latest --lang ja --kiro-dir docs"

# --------------------------------------
# miseè‡ªä½“ã®ç®¡ç†
# --------------------------------------
# miseè¨ºæ–­
[tasks.mise-doctor]
alias = "md"
description = "miseç’°å¢ƒè¨ºæ–­"
run = "mise doctor"

# mise list
[tasks.mise-list]
alias = "ml"
description = "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ„ãƒ¼ãƒ«ä¸€è¦§"
run = "mise list"

# miseæ›´æ–°ï¼ˆHomebrewçµŒç”±ï¼‰
[tasks.mise-self-update]
alias = "msu"
description = "miseæœ¬ä½“æ›´æ–°ï¼ˆHomebrewçµŒç”±ï¼‰"
run = "brew upgrade mise"

# mise upgrade
[tasks.mise-upgrade]
alias = "mu"
description = "miseã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«/æ›´æ–°ã‚’å®Ÿè¡Œï¼‰"
run = "mise upgrade"

# mise prune
[tasks.mise-prune]
alias = "mp"
description = "ä½¿ã‚ã‚Œã¦ã„ãªã„ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‰Šé™¤"
run = "mise prune"

# --------------------------------------
# Rusté–¢é€£
# --------------------------------------
# Cargoæ›´æ–°
[tasks.rust-cargo-update]
description = "cargo update"
run = "cargo install-update -a"

# ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–
[tasks.rust-procs]
description = "ãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°"
run = "procs"

# ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–
[tasks.rust-rtop]
description = "ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°"
run = "rtop"

# --------------------------------------
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
# --------------------------------------
# Lighthouseã§ã‚µã‚¤ãƒˆå…¨ä½“ã‚’ã‚¹ã‚­ãƒ£ãƒ³
[tasks.perf-unlighthouse]
alias = "ulh"
description = "ã‚µã‚¤ãƒˆå…¨ä½“ã®Lighthouseã‚¹ã‚­ãƒ£ãƒ³ï¼ˆUnlighthouseï¼‰"
run = """
echo "ä½¿ç”¨æ–¹æ³•: npx unlighthouse --site <URL>"
echo "ä¾‹: npx unlighthouse --site https://example.com"
"""

# Lighthouseã§ã‚µã‚¤ãƒˆå…¨ä½“ã‚’ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆCIç”¨ï¼‰
[tasks.perf-unlighthouse-ci]
description = "CIç’°å¢ƒã§Unlighthouseã‚’å®Ÿè¡Œ"
run = """
if [ -z "$UNLIGHTHOUSE_SITE" ]; then
  echo "âŒ Error: UNLIGHTHOUSE_SITE ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„"
  exit 1
fi
npx unlighthouse --site "$UNLIGHTHOUSE_SITE" --build-static
"""

# --------------------------------------
# Lint & Format (çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆçµŒç”±)
# --------------------------------------
# å…¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯
[tasks.lint]
alias = "l"
description = "å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®lintã‚’å®Ÿè¡Œ"
run = """
bun ~/dotfiles/scripts/development/lint-format.ts --mode=check --verbose
"""

# å…¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
[tasks.format]
alias = "f"
description = "å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®formatã‚’å®Ÿè¡Œ"
run = """
bun ~/dotfiles/scripts/development/lint-format.ts --mode=fix --verbose
"""

# ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
[tasks.lint-staged]
alias = "ls"
description = "ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®lintã‚’å®Ÿè¡Œ"
run = """
bun ~/dotfiles/scripts/development/lint-format.ts --mode=check --staged --verbose
"""

# ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
[tasks.format-staged]
alias = "fs"
description = "ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®formatã‚’å®Ÿè¡Œ"
run = """
bun ~/dotfiles/scripts/development/lint-format.ts --mode=fix --staged --verbose
"""

# Lintãƒ„ãƒ¼ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
[tasks.lint-setup]
description = "lintãƒ„ãƒ¼ãƒ«ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"
run = """
pre-commit install
echo "âœ… Setup complete!"
"""

# --------------------------------------
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
# --------------------------------------
# homeã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ä½œæˆ
[tasks.setup-home-symlink]
alias = "sds"
description = "homeã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆ"
run = "bash ~/dotfiles/setup/02_home.sh"

# --------------------------------------
# Docker/Container
# --------------------------------------
# Colimaèµ·å‹•
[tasks.docker-colima-start]
alias = "cs"
description = "Colimaã‚’èµ·å‹•ï¼ˆDocker Desktopä»£æ›¿ï¼‰"
run = "colima start"

# Colimaåœæ­¢
[tasks.docker-colima-stop]
alias = "cx"
description = "Colimaã‚’åœæ­¢"
run = "colima stop"

# ColimaçŠ¶æ…‹ç¢ºèª
[tasks.docker-colima-status]
description = "Colimaã®çŠ¶æ…‹ã‚’ç¢ºèª"
run = "colima status"

# --------------------------------------
# ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†
# --------------------------------------
# ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ï¼ˆæ‰‹å‹•çµ‚äº†ã™ã‚‹ã¾ã§ï¼‰
[tasks.system-caffeinate]
alias = "cafe"
description = "ã‚¹ãƒªãƒ¼ãƒ—ã‚’é˜²æ­¢ï¼ˆCtrl+Cã§çµ‚äº†ï¼‰"
run = "caffeinate -dis"

# ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ï¼ˆ1æ™‚é–“ï¼‰
[tasks.system-caffeinate-1h]
alias = "cafe1"
description = "1æ™‚é–“ã‚¹ãƒªãƒ¼ãƒ—ã‚’é˜²æ­¢"
run = "caffeinate -t 3600"

# ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ï¼ˆ2æ™‚é–“ï¼‰
[tasks.system-caffeinate-2h]
alias = "cafe2"
description = "2æ™‚é–“ã‚¹ãƒªãƒ¼ãƒ—ã‚’é˜²æ­¢"
run = "caffeinate -t 7200"

# ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ï¼ˆ4æ™‚é–“ï¼‰
[tasks.system-caffeinate-4h]
alias = "cafe4"
description = "4æ™‚é–“ã‚¹ãƒªãƒ¼ãƒ—ã‚’é˜²æ­¢"
run = "caffeinate -t 14400"

# ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚¹ãƒªãƒ¼ãƒ—ã®ã¿é˜²æ­¢
[tasks.system-caffeinate-display]
alias = "cafed"
description = "ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚¹ãƒªãƒ¼ãƒ—ã®ã¿é˜²æ­¢ï¼ˆCtrl+Cã§çµ‚äº†ï¼‰"
run = "caffeinate -d"

# PATHè¡¨ç¤º
[tasks.system-envpath]
description = "envpath"
run = "echo $PATH | sed 's/:/\\n/g'"

# ç’°å¢ƒå¤‰æ•°è¡¨ç¤º
[tasks.system-envsort]
description = "ç’°å¢ƒå¤‰æ•°ã‚’ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã§ã‚½ãƒ¼ãƒˆã—ã¦è¡¨ç¤º"
run = "env | sort"

# ã‚·ã‚§ãƒ«å†èµ·å‹•
[tasks.system-shreboot]
description = "SHELLå†èµ·å‹•"
run = "exec $SHELL -l"

# Ghosttyè¨­å®šå†èª­ã¿è¾¼ã¿
[tasks.system-ghostty-reload]
alias = "gr"
description = "Ghosttyè¨­å®šã‚’å†èª­ã¿è¾¼ã¿"
run = "echo 'ğŸ’¡ Cmd + Shift + , ã‚’æŠ¼ã—ã¦Ghosttyã®è¨­å®šã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„'"

# tmuxè¨­å®šå†èª­ã¿è¾¼ã¿
[tasks.system-tmux-reload]
description = "tmuxè¨­å®šã‚’å†èª­ã¿è¾¼ã¿"
run = "tmux source-file ~/.tmux.conf && tmux display-message 'tmuxè¨­å®šã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸ'"

# zshè¨­å®šå†èª­ã¿è¾¼ã¿
[tasks.system-zsh-reload]
description = "zshã®è¨­å®šã‚’å†èª­ã¿è¾¼ã¿"
shell = "zsh -c"
run = "source ~/.zshrc && echo 'âœ… zshè¨­å®šã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸ'"

# --------------------------------------
# ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
# --------------------------------------
# Homebrewæ›´æ–°
[tasks.update-brew]
alias = "ub"
description = "Homebrewæ›´æ–°"
run = "sh ~/dotfiles/setup/04_homebrew.sh && brew update && brew upgrade && brew cleanup"

# Homebrewæ˜ç¤ºçš„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§
[tasks.brew-leaves]
alias = "blv"
description = "æ˜ç¤ºçš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸHomebrewãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤º"
run = "brew leaves | xargs brew list --versions"

# Brewfileã¨ã®ç…§åˆ
[tasks.brew-check]
alias = "bc"
description = "Brewfileã§ç®¡ç†ã•ã‚Œã¦ã„ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¤œå‡º"
run = '''
bash -c '
brewfile_packages=$(grep "^brew \"" ~/dotfiles/setup/Brewfile | sed "s/^brew \"\([^\"]*\)\".*/\1/" | sort)
installed_packages=$(brew leaves | sort)
unmanaged=$(comm -13 <(echo "$brewfile_packages") <(echo "$installed_packages"))

if [ -z "$unmanaged" ]; then
  echo "âœ… ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒBrewfileã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™"
else
  echo "âš ï¸  Brewfileã§ç®¡ç†ã•ã‚Œã¦ã„ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:"
  echo ""
  echo "$unmanaged" | while read -r pkg; do
    echo "  - $pkg"
  done
  echo ""
  echo "ğŸ’¡ ã“ã‚Œã‚‰ã‚’Brewfileã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„"
fi
'
'''

# batã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
[tasks.util-bat]
description = "fzfã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦batã§è¡¨ç¤º"
run = '''
file=$(find . -maxdepth 1 -type f | sort | fzf --preview "bat --color=always {}")
if [ -n "$file" ]; then
    bat "$file"
fi
'''

# hexylã§ãƒã‚¤ãƒŠãƒªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
[tasks.util-hexyl]
description = "fzfã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦hexylã§è¡¨ç¤º"
run = '''
file=$(find . -maxdepth 1 -type f | sort | fzf --preview "hexyl --length 256 {}")
if [ -n "$file" ]; then
    hexyl "$file"
fi
'''

# Xcodeã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆå¯¾è©±å‹ï¼‰
[tasks.util-clean-xcode]
description = "Xcodeã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆå¯¾è©±å‹ã€clean-my-xcodeï¼‰"
run = 'curl -fsSL https://raw.githubusercontent.com/filsv/clean-my-xcode/main/clean-my-xcode.sh | bash'

# Xcodeã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰
[tasks.util-clean-xcode-simple]
description = "Xcodeã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆã€xcode-clean.shï¼‰"
run = 'curl -fsSL https://raw.githubusercontent.com/niklasberglund/xcode-clean.sh/master/xcode-clean.sh | bash -s -- -A'

[tools]
# ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’å®šç¾©
# ä¾‹:
# node = "lts"           # Node.js LTSç‰ˆ
# python = "3.12"        # Python 3.12
# ruby = "3.3"           # Ruby 3.3
# go = "1.22"            # Go 1.22
# rust = "stable"        # Rustå®‰å®šç‰ˆ

# === JavaScript ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  ===
node = ["lts", "latest", "25", "24", "23", "22", "21", "20", "19", "18"]
deno = "latest"
bun = "latest"
# npm = "latest"

# === ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ ===
yarn = "latest"
pnpm = "latest"

# === ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« ===
"npm:node-gyp" = "latest"

# === AI/LLM ãƒ„ãƒ¼ãƒ« ===
"npm:@antiwork/shortest" = "latest"   # https://github.com/antiwork/shortest
"npm:@github/copilot" = "latest"
"npm:@google/gemini-cli" = "latest"
"npm:@mixedbread/mgrep" = "latest"    # Semantic search tool for Claude Code
"npm:@openai/codex" = "latest"
# "npm:@byterover/cipher" = "latest"    # https://github.com/campfirein/cipher
"npm:@endorhq/rover" = "latest"       # https://github.com/endorhq/rover
# "npm:@letta-ai/letta-code" = "latest" # https://github.com/letta-ai/letta-code
"npm:@playwright/mcp" = "latest"      # https://github.com/microsoft/playwright-mcp/releases/tag/v0.0.58
"npm:@sasazame/ccresume" = "latest"   # https://zenn.dev/sasazame/articles/3634040f7fb4da
"npm:cc-sdd" = "latest"               # https://github.com/gotalab/cc-sdd/blob/main/tools/cc-sdd/README_ja.md
"npm:cc-wrapped" = "latest"           # https://github.com/numman-ali/cc-wrapped
"npm:ccexp" = "latest"                # https://zenn.dev/nyatinte/articles/launch-ccexp
"npm:ccmanager" = "latest"            # https://zenn.dev/kbwok/articles/33fad69555d005
"npm:ccsearch" = "latest"             # https://zenn.dev/suthio/articles/126bc21f0741a6
"npm:ccusage" = "latest"              # https://zenn.dev/ryoppippi/articles/6c9a8fe6629cd6
"npm:claude-code-monitor" = "latest"  # https://github.com/onikan27/claude-code-monitor
"npm:codemass" = "latest"             # https://x.com/kenn/status/1953281949566706030
"npm:mmcp" = "latest"                 # https://zenn.dev/kou_pg_0131/articles/mmcp-introduction
"npm:ui-skills" = "latest"            # https://www.ui-skills.com/
"npm:vibe-kanban" = "latest"          # https://www.vibekanban.com/

# === ãƒ‡ãƒ—ãƒ­ã‚¤/ã‚¯ãƒ©ã‚¦ãƒ‰ ===
"npm:firebase-tools" = "latest"
"npm:heroku" = "latest"
"npm:netlify-cli" = "latest"
"npm:vercel" = "latest"

# === é–‹ç™ºãƒ„ãƒ¼ãƒ« ===
"npm:caniuse-cmd" = "latest"          # ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒã‚§ãƒƒã‚¯
"npm:ctx7" = "latest"                 # https://context7.com/?tab=skills
"npm:czg" = "latest"                  # ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ”¯æ´ï¼ˆgit-cz ã®å¾Œç¶™ï¼‰
"npm:difit" = "latest"                # https://zenn.dev/yoshiko/articles/difit-from-reviewit
"npm:fixpack" = "latest"              # package.jsonæ•´ç†
"npm:git-cz" = "latest"               # Git commitæ”¯æ´
"npm:git-diff-archive" = "latest"     # Gitå·®åˆ†ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
"npm:http-server" = "latest"          # ãƒ­ãƒ¼ã‚«ãƒ« HTTP ã‚µãƒ¼ãƒãƒ¼
"npm:lighthouse" = "latest"           # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
"npm:unlighthouse" = "latest"         # ã‚µã‚¤ãƒˆå…¨ä½“ã®Lighthouseã‚¹ã‚­ãƒ£ãƒ³
"npm:markdownlint-cli" = "latest"     # Markdown ãƒªãƒ³ã‚¿ãƒ¼
"npm:npm-check" = "latest"            # npmä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯
"npm:npm-check-updates" = "latest"    # npmæ›´æ–°ãƒã‚§ãƒƒã‚¯
"npm:oxfmt" = "latest"                # Formatter
"npm:oxlint" = "latest"               # Linter

# === ç”»åƒå‡¦ç† ===
"npm:imageoptim-cli" = "latest"       # ç”»åƒæœ€é©åŒ–
"npm:svgo" = "latest"                 # SVG æœ€é©åŒ–

# === ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ ===
"npm:gtop" = "latest"                 # ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ï¼ˆhtop/btop ä»£æ›¿ï¼‰

# === Rust ===
rust = "stable"

# --- ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ ---
"cargo:filetree" = "latest"     # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ï¼ˆTUIï¼‰

# --- Gité–¢é€£ ---
"cargo:keifu" = "latest"        # Git commit graphs
"cargo:needle-cli" = "latest"   # GitHub PRs ãƒ¬ãƒ“ãƒ¥ãƒ¼æ”¯æ´
"cargo:https://github.com/anatawa12/git-vrc" = "latest"

# --- é–‹ç™ºãƒ„ãƒ¼ãƒ« ---
"cargo:cargo-update" = "latest" # cargo ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°ç®¡ç†
"cargo:hx" = "latest"           # Hex Viewer

# --- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/HTTP ---
"cargo:ruget" = "latest"        # ã™ã”ã„wget

# --- ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ ---
"cargo:rtop" = "latest"         # ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

# === Go ===
# â€» fzfã€ghã€ghqã€giboã€hubã€lazygitã€wtpã€lazydockerã€colimaã€dockmateã€
#    naviã€ptã€mactopã€direnvã€shfmtã€dstpã€pgetã€ollama ã¯ Homebrew ã§ç®¡ç†
go = "latest"  # Goæœ¬ä½“
"go:github.com/d-kuro/gwq/cmd/gwq" = "latest"  # Git worktreeç®¡ç†
