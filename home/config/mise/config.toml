# ============================================
# mise Configuration
# ============================================
# miseã¯é–‹ç™ºç’°å¢ƒç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™
# Node.jsã€Pythonã€Rubyç­‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™
#
# ä½¿ç”¨æ–¹æ³•:
# mise run <task>        # ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
# mise run <alias>       # ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
# mise list              # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ„ãƒ¼ãƒ«ä¸€è¦§
# mise install           # .mise.tomlã®è¨­å®šã«åŸºã¥ã„ã¦ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

# ============================================
# Environment Variables (ç’°å¢ƒå¤‰æ•°è¨­å®š)
# ============================================
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§ä½¿ç”¨ã•ã‚Œã‚‹ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©
[env]

# ============================================
# Global Settings (ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š)
# ============================================
[settings]
# å®Ÿé¨“çš„æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ï¼ˆæ–°æ©Ÿèƒ½ã‚’è©¦ã—ãŸã„å ´åˆã¯trueï¼‰
experimental = true
# ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœŸé–“
fetch_remote_versions_cache = "1h"
# ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å–å¾—æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
fetch_remote_versions_timeout = "10s"
# ä¸¦åˆ—å®Ÿè¡Œã‚¸ãƒ§ãƒ–æ•°ï¼ˆCPUã‚³ã‚¢æ•°ã«å¿œã˜ã¦èª¿æ•´ï¼‰
jobs = 4
# ãƒ¬ã‚¬ã‚·ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.nvmrcã€.ruby-versionç­‰ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆ
legacy_version_file = true
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è‡ªå‹•æ›´æ–°ãƒã‚§ãƒƒã‚¯ã®é–“éš”
plugin_autoupdate_last_check_duration = "7 days"
# ä¿¡é ¼ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆã“ã‚Œã‚‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®.mise.tomlã¯è‡ªå‹•çš„ã«ä¿¡é ¼ã•ã‚Œã‚‹ï¼‰
trusted_config_paths = ["~/dotfiles", "~/src/**", "~/projects/**"]

# --------------------------------------
# AWSé–¢é€£
# --------------------------------------
[tasks.aws-login]
alias = "al"
description = "AWS SSOãƒ­ã‚°ã‚¤ãƒ³"
run = "aws sso login"

# --------------------------------------
# GitHub/é–‹ç™ºãƒ„ãƒ¼ãƒ«
# --------------------------------------
[tasks.browserslist]
alias = "bl"
description = "Browserslistæ›´æ–°"
run = "npx browserslist@latest --update-db"

[tasks.gh-list-deploy]
description = "ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œå±¥æ­´ã‚’è¡¨ç¤ºã™ã‚‹"
run = """
gh run list \
    --repo firstcontributions/first-contributions \
    --limit 10
"""

# --------------------------------------
# Gitæ“ä½œ
# --------------------------------------
# GitUIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
[tasks.git-client-gitui]
description = "gitã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"
run = "gitui"

# LazyGitã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
[tasks.git-client-lazygit]
description = "gitã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"
run = "lazygit"

# Tigã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
[tasks.git-client-tig]
description = "gitã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"
run = "tig"

# Git logè¡¨ç¤ºï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰
[tasks.git-log-glog]
description = "ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¯ãƒ³ãƒ©ã‚¤ãƒ³è¡¨ç¤º"
run = """
git log \
    --graph \
    --date=short \
    --pretty='format:%C(yellow)%h%C(reset) %C(green)%ad%C(reset) %C(blue)%an%C(reset)%C(red)%d%C(reset) %s'
"""

# Git logè¡¨ç¤ºï¼ˆè©³ç´°ï¼‰
[tasks.git-log-glogd]
description = "è©³ç´°è¡¨ç¤ºï¼ˆç›¸å¯¾æ™‚é–“ã€å…¨ãƒ–ãƒ©ãƒ³ãƒï¼‰"
run = """
git log \
    --graph \
    --all \
    --date=relative \
    --pretty='format:%C(yellow)%h%C(reset) %C(green)(%ar)%C(reset) %C(blue)%an%C(reset)%C(red)%d%C(reset) %s'
"""

# Git logè¡¨ç¤ºï¼ˆçµ±è¨ˆä»˜ãï¼‰
[tasks.git-log-glogs]
description = "çµ±è¨ˆæƒ…å ±ä»˜ãè©³ç´°è¡¨ç¤ºï¼ˆå¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«æ•°è¡¨ç¤ºï¼‰"
run = """
git log \
    --graph \
    --stat \
    --date=iso \
    --pretty='format:%C(yellow)commit %H%C(reset)%C(red)%d%C(reset)%nAuthor: %C(blue)%an <%ae>%C(reset)%nDate:   %C(green)%ad%C(reset)%n%n    %s%n'
"""

# ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ„ãƒ¼ãƒ«
[tasks.git-util-difit-browser]
description = "ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‹ã"
run = "difit"

[tasks.git-util-difit-tui]
description = "ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’TUIã§é–‹ã"
run = "difit --tui"

[tasks.git-util-hbr]
description = "ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã"
run = "hub browse $(ghq list | fzf | cut -d '/' -f 2,3)"

# Claude Codeé–¢ä¿‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º
[tasks.llm-claude-ccexp]
description = "Claude Codeé–¢ä¿‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º"
run = "ccexp"

# --------------------------------------
# LLM/AIé–¢é€£
# --------------------------------------
# Claude Codeå†é–‹ãƒ„ãƒ¼ãƒ«
[tasks.llm-claude-ccresume]
description = "Claude Codeã®claude --resumeã‚’ä½¿ã„ã‚„ã™ãã™ã‚‹"
run = "ccresume"

# Claude Codeã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œç´¢
[tasks.llm-claude-ccsearch]
description = "Claude Codeã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œç´¢ãƒ»å…±æœ‰"
run = "ccsearch"

# Claude Codeä½¿ç”¨çŠ¶æ³
[tasks.llm-claude-ccusage]
description = "Claude Codeã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½¿ç”¨çŠ¶æ³ã‚’è¡¨ç¤º"
run = "ccusage"

# codemass
[tasks.llm-codemass]
description = "codemassã‚’èµ·å‹•"
run = "codemass"

# Serena MCPã‚µãƒ¼ãƒãƒ¼
[tasks.llm-serena]
description = "serena-mcp-serverã‚’èµ·å‹•"
run = "uvx --from git+https://github.com/oraios/serena serena-mcp-server"

# cc-sdd
[tasks.ccsdd-install]
description = "cc-sddã‚’å°å…¥"
run = "npx cc-sdd@latest --lang ja"

# --------------------------------------
# miseè‡ªä½“ã®ç®¡ç†
# --------------------------------------
# miseè¨ºæ–­
[tasks.mise-doctor]
alias = "md"
description = "miseç’°å¢ƒè¨ºæ–­"
run = "mise doctor"

# mise list
[tasks.mise-list]
alias = "ml"
description = "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ„ãƒ¼ãƒ«ä¸€è¦§"
run = "mise list"

# miseæ›´æ–°
[tasks.mise-self-update]
alias = "msu"
description = "miseæœ¬ä½“æ›´æ–°"
run = "mise self-update"

# mise upgrade
[tasks.mise-upgrade]
alias = "mu"
description = "miseã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«/æ›´æ–°ã‚’å®Ÿè¡Œï¼‰"
run = "mise upgrade"

# --------------------------------------
# Rusté–¢é€£
# --------------------------------------
# Cargoæ›´æ–°
[tasks.rust-cargo-update]
description = "cargo update"
run = "cargo install-update -a"

# ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–
[tasks.rust-procs]
description = "ãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°"
run = "procs"

# ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–
[tasks.rust-rtop]
description = "ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°"
run = "rtop"

# --------------------------------------
# Lint & Format (pre-commit hookç”¨)
# --------------------------------------
# å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
[tasks.shell-script-format]
description = "å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®formatã‚’å®Ÿè¡Œ"
run = """
echo "ğŸ¨ Formatting files..."
# ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
find . -name "*.sh" -type f -exec shfmt -w -s -i 2 {} +
# Markdown, YAML, JSON
prettier --write "**/*.{md,yaml,yml,json}"
# TOML
find . -name "*.toml" -type f -exec taplo format {} +
echo "âœ¨ Formatting complete!"
"""

# ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
[tasks.shell-script-format-sh]
description = "ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®formatã‚’å®Ÿè¡Œ"
run = """
echo "ğŸ¨ Formatting shell scripts..."
find . -name "*.sh" -type f -exec shfmt -w -s -i 2 {} +
"""

# å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®Lint
[tasks.shell-script-lint]
description = "å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®lintã‚’å®Ÿè¡Œ"
run = """
echo "ğŸ” Running lint checks..."
# Markdownlint
echo "ğŸ“ Checking Markdown files..."
markdownlint **/*.md --fix 2>/dev/null || echo "No markdown issues found"
# yamllint
echo "ğŸ“„ Checking YAML files..."
yamllint . || echo "YAML lint completed"
echo "âœ… Lint checks completed"
"""

# ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®Lint
[tasks.shell-script-lint-sh]
description = "ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®lintã‚’å®Ÿè¡Œ"
run = """
echo "ğŸ” ShellCheck running..."
find . \\( -name "*.sh" -o -path "./.githooks/pre-commit" -o -name "imgcat" \\) -type f -not -path "./.git/*" -exec shellcheck {} +
"""

# Lintãƒ„ãƒ¼ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
[tasks.shell-script-setup-lint]
description = "lintãƒ„ãƒ¼ãƒ«ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"
run = """
echo "ğŸ“¦ Installing lint tools..."
# Homebrew tools
brew install shellcheck shfmt yamllint
# npm tools
npm install -g prettier markdownlint-cli
# Rust tools
cargo install taplo-cli
# pre-commit
brew install pre-commit
pre-commit install
echo "âœ… Setup complete!"
"""

# --------------------------------------
# ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†
# --------------------------------------
# PATHè¡¨ç¤º
[tasks.system-envpath]
description = "envpath"
run = "echo $PATH | sed 's/:/\\n/g'"

# ç’°å¢ƒå¤‰æ•°è¡¨ç¤º
[tasks.system-envsort]
description = "ç’°å¢ƒå¤‰æ•°ã‚’ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã§ã‚½ãƒ¼ãƒˆã—ã¦è¡¨ç¤º"
run = "env | sort"

# ã‚·ã‚§ãƒ«å†èµ·å‹•
[tasks.system-shreboot]
description = "SHELLå†èµ·å‹•"
run = "exec $SHELL -l"

# tmuxè¨­å®šå†èª­ã¿è¾¼ã¿
[tasks.system-tmux-reload]
description = "tmuxè¨­å®šã‚’å†èª­ã¿è¾¼ã¿"
run = "tmux source-file ~/.tmux.conf && tmux display-message 'tmuxè¨­å®šã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸ'"

# zshè¨­å®šå†èª­ã¿è¾¼ã¿
[tasks.system-zsh-reload]
description = "zshã®è¨­å®šã‚’å†èª­ã¿è¾¼ã¿"
shell = "zsh -c"
run = "source ~/.zshrc && echo 'âœ… zshè¨­å®šã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã—ãŸ'"

# --------------------------------------
# ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
# --------------------------------------
# Homebrewæ›´æ–°
[tasks.update-brew]
alias = "ub"
description = "Homebrewæ›´æ–°"
run = "sh ~/dotfiles/setup/10_homebrew.sh && brew update && brew upgrade && brew cleanup"

# batã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
[tasks.util-bat]
description = "fzfã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦batã§è¡¨ç¤º"
run = '''
file=$(find . -maxdepth 1 -type f | sort | fzf --preview "bat --color=always {}")
if [ -n "$file" ]; then
    bat "$file"
fi
'''

# hexylã§ãƒã‚¤ãƒŠãƒªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
[tasks.util-hexyl]
description = "fzfã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦hexylã§è¡¨ç¤º"
run = '''
file=$(find . -maxdepth 1 -type f | sort | fzf --preview "hexyl --length 256 {}")
if [ -n "$file" ]; then
    hexyl "$file"
fi
'''

[tools]
# ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’å®šç¾©
# ä¾‹:
# node = "lts"           # Node.js LTSç‰ˆ
# python = "3.12"        # Python 3.12
# ruby = "3.3"           # Ruby 3.3
# go = "1.22"            # Go 1.22
# rust = "stable"        # Rustå®‰å®šç‰ˆ

node = ["lts", "latest", "25", "24", "23", "22", "21", "20", "19", "18"]
deno = "latest"
bun = "latest"
# npm = "latest"
yarn = "latest"
pnpm = "latest"

"npm:@github/copilot" = "latest"
"npm:@google/gemini-cli" = "latest"
"npm:@openai/codex" = "latest"
"npm:@byterover/cipher" = "latest"      # https://github.com/campfirein/cipher
"npm:@endorhq/rover" = "latest"         # https://github.com/endorhq/rover
"npm:@sasazame/ccresume" = "latest"     # https://zenn.dev/sasazame/articles/3634040f7fb4da
"npm:@letta-ai/letta-code" = "latest"   # https://github.com/letta-ai/letta-code
"npm:ccexp" = "latest"                  # https://zenn.dev/nyatinte/articles/launch-ccexp
"npm:ccmanager" = "latest"              # https://zenn.dev/kbwok/articles/33fad69555d005
"npm:ccsearch" = "latest"               # https://zenn.dev/suthio/articles/126bc21f0741a6
"npm:ccusage" = "latest"                # https://zenn.dev/ryoppippi/articles/6c9a8fe6629cd6
"npm:cc-sdd" = "latest"                 # https://github.com/gotalab/cc-sdd/blob/main/tools/cc-sdd/README_ja.md
"npm:codemass" = "latest"               # https://x.com/kenn/status/1953281949566706030
"npm:mmcp" = "latest"                   # https://zenn.dev/kou_pg_0131/articles/mmcp-introduction
"npm:vibe-kanban" = "latest"            # https://www.vibekanban.com/

"npm:caniuse-cmd" = "latest"
"npm:difit" = "latest"
"npm:fixpack" = "latest"
"npm:git-cz" = "latest"
"npm:git-diff-archive" = "latest"
"npm:gtop" = "latest"
"npm:lighthouse" = "latest"
"npm:npm-check" = "latest"
"npm:npm-check-updates" = "latest"
"npm:oxfmt" = "latest"
"npm:oxlint" = "latest"

rust = "stable"
"cargo:bandwhich" = "latest"    # https://crates.io/crates/bandwhich ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ç›£è¦–
"cargo:bat" = "latest"          # https://crates.io/crates/bat ã™ã”ã„cat
"cargo:cargo-update" = "latest" # https://crates.io/crates/cargo-update
"cargo:eza" = "latest"          # https://crates.io/crates/eza ã™ã”ã„ls
"cargo:fd-find" = "latest"      # https://crates.io/crates/fd-find ã™ã”ã„find
"cargo:hexyl" = "latest"        # https://crates.io/crates/hexyl ã™ã”ã„od
"cargo:hgrep" = "latest"        # https://crates.io/crates/hgrep ã™ã”ã„grep
"cargo:hx" = "latest"           # https://crates.io/crates/hx HTTPie / é«˜æ©Ÿèƒ½cURL
"cargo:needle-cli" = "latest"   # https://crates.io/crates/needle-cli GitHub PRs ãƒ¬ãƒ“ãƒ¥ãƒ¼æ”¯æ´
"cargo:procs" = "latest"        # https://crates.io/crates/procs ã™ã”ã„ps
"cargo:ripgrep" = "latest"      # https://crates.io/crates/ripgrep ã™ã”ã„grep
"cargo:rtop" = "latest"         # https://crates.io/crates/rtop ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
"cargo:ruget" = "latest"        # https://crates.io/crates/ruget ã™ã”ã„wget
# "cargo:starship" = "latest"   # https://crates.io/crates/starship ã™ã”ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
# "cargo:zellij" = "latest"     # https://crates.io/crates/zellij ã™ã”ã„tmux
"cargo:https://github.com/anatawa12/git-vrc" = "latest"

go = "latest"
# "go:github.com/JuanIrache/gopro-utils/bin/gopro2gpx" = "latest"
