# main viewの左端にコミットIDを表示する
set main-view = line-number:true,interval=10 date id author commit-title:graph=yes,refs=yes
# デフォルト
# set main-view = date author commit-title:graph=yes,refs=yes

# 画面を垂直方向に分割する（左右分割）
set vertical-split = yes

# 垂直分割時の右側ビュー（diff表示領域）の幅を60%に設定
# デフォルトは50%だが、diffを見やすくするため右側を広めに確保
set split-view-width = 60%

# 水平分割したウィンドウの下画面サイズを % で指定（行数指定も可）
# set split-view-height = 80%

# 差分の前後の表示行数（diff-context)を指定
set diff-context = 6

# ========================================
# git-delta統合
# ========================================
# Zキー: deltaによる通常のdiff表示
# Xキー: deltaによるside-by-side diff表示
# 参考: https://gist.github.com/kmatt/4ee3c24ab077ae556fb15563fd08469b
#
# 注:
# - D/Sキー: デフォルト機能に割り当て済み
# - Ctrl+d/s: デフォルト機能に割り当て済み（半ページスクロール等）
# - #キー: コメント記号のため使用不可
# - sh -c 必要: パイプを正しく処理するためシェル経由で実行

# diffビューでdeltaを使用
bind diff Z !sh -c "git show %(commit) | delta --paging always --dark"
bind diff X !sh -c "git show %(commit) | delta --paging always --dark --side-by-side"

# stageビューでdeltaを使用（ステージ済みの内容を表示）
bind stage Z !sh -c "git diff --cached %(file) | delta --paging always --dark"
bind stage X !sh -c "git diff --cached %(file) | delta --paging always --dark --side-by-side"

# statusビューでdeltaを使用
bind status Z !sh -c "git diff %(file) | delta --paging always --dark"
bind status X !sh -c "git diff %(file) | delta --paging always --dark --side-by-side"
