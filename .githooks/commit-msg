#!/bin/bash

# Commit message ã« AIç½²åãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯
# Git hook: commit-msg

RED='\033[0;31m'
NC='\033[0m' # No Color

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# AIç½²åãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
if echo "$commit_msg" | grep -qE "ğŸ¤– Generated with Claude Code|Co-Authored-By: Claude"; then
  echo -e "${RED}âŒ ã‚¨ãƒ©ãƒ¼: ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«AIç½²åãŒå«ã¾ã‚Œã¦ã„ã¾ã™${NC}"
  echo -e "${RED}ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å‰Šé™¤ã—ã¦ãã ã•ã„ï¼š${NC}"
  echo -e "${RED}  - ğŸ¤– Generated with Claude Code${NC}"
  echo -e "${RED}  - Co-Authored-By: Claude${NC}"
  echo ""
  echo "ç¾åœ¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼š"
  echo "---"
  cat "$commit_msg_file"
  echo "---"
  exit 1
fi

exit 0
